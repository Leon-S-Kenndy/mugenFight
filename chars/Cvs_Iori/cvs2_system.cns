;=====================================================================
; SVC2-System state file
;=====================================================================

;特殊システム用 var(30-49)&fvar(0-10)
;	var(30) : グルーヴ判別（1:Cグルーヴ 2:Aグルーヴ 3:Pグルーヴ 4:Sグルーヴ 5:Nグルーヴ 6:Kグルーヴ)
;	var(31) : 特殊ジャンプフラグ
;	var(32) : ジャンプ種類管理
;	var(33) : 防御値補正
;	var(34) : カウンターヒット用フラグ1
;	var(35) : ブロッキング成功
;	var(36) : 
;	var(37) : ジャストディフェンス受付時間
;	var(38) : 削られKOフラグ
;	var(39) : メッセージアイコン用1
;	var(40) : トレーニングモード
;	var(41) : ヒット数カウント1
;	var(42) : ヒット数カウント2
;	var(43) : 残像消去
;	var(44) : ブロッキング無効
;	var(45) : メッセージアイコン用2
;	var(46) : カウンターヒット用フラグ2
;	var(47) : グルーブランダムセレクト
;	var(48) : S,Kグルゲージ量
;	var(49) : KO音声判別
;	var(50) : グルーブセレクト用

;	fvar(0)  : CPU判別
;	fvar(5)  : パワー増加量
;	fvar(6)  : 根性値
;	fvar(7)  : S,Kグルゲージ量
;	fvar(8)  : 持続時間
;	fvar(9)  : ゲージ蓄積による攻撃力の増加
;	fvar(10) : 攻撃値補正

;---------------------------------------------------------------------------
; Initialize (at the start of the round)
[Statedef 5900]
type = S

[State 5900, 1]
type = VarSet
trigger1 = roundno = 1
var(49) = 0

[State 5900, 1] 
type = VarRangeSet
trigger1 = roundno >= 1 
first = 0
last = 29
value = 0

[State 5900, 1] 
type = VarRangeSet
trigger1 = roundno >= 1 
first = 31
last = 39
value = 0

[State 5900, 1] 
type = VarRangeSet
trigger1 = roundno >= 1 
first = 41
last = 48
value = 0

[State 5900, 2]
type = VarRangeSet
trigger1 = roundno >= 1
fvalue = 0
first = 0
last = 6

[State 5900, 2]
type = VarRangeSet
trigger1 = roundno >= 1
fvalue = 0
first = 8
last = 39

;===========================================================================
; ↑変更不可
;===========================================================================
;---------------------------------------------------------------------
; システム設定
[State 5900, 1] 
type = VarSet
triggerall = !NumPartner
trigger1 = var(50) != 10 || MatchNo = 1 && RoundNo = 1 && var(40) = 2
var(50) = -1
;-1:セレクト有り 
;1〜6:グルーブセレクト固定(1:C-Groove 2:A-Groove 3:P-Groove 4:S-Groove 5:N-Groove 6:K-Groove）
;数値部分を変更することでシステムの設定をすることが出来ます。

;===========================================================================
; ↓変更不可
;===========================================================================

[State 5900, 1] 
type = VarSet
triggerall = !NumPartner
trigger1 = Time = 0 && var(50)!=10
var(30) = var(50)

[State -2, 3]
type = VarRandom
trigger1 = roundsexisted <= 0
persistent = 0
v = 47
range = 1,6

[state 190, groove]
type = helper
trigger1 = Time = 0 && var(30) = -1
ID = 20000
stateno = 20000+Var(47)
postype = P1
pos = 0,-15
name = "groove"
ontop = 1
bindtime = -1
keyctrl = 1
facing = 1+(teamside = 2)*-2

[state 190, groove]
type = helper
trigger1 = Time = 0 && var(30) = -1
trigger1 = Numhelper(20000)
ID = 20010
stateno = 20010
postype = P1
scale = .5,.5
pos = 0,-25
name = "Up-Arrow"
ontop = 1
bindtime = -1
keyctrl = 1
ownpal = 1
facing = 1+(teamside = 2)*-2

[state 190, groove]
type = helper
trigger1 = Time = 0 && var(30) = -1
trigger1 = Numhelper(20000)
ID = 20010
stateno = 20015
postype = P1
scale = .5,.5
pos = 0,-5
name = "Down-Arrow"
ontop = 1
bindtime = -1
keyctrl = 1
ownpal = 1
facing = 1+(teamside = 2)*-2

[State 5900, 1]
type = VarSet
trigger1 = (fvar(8) && var(30) = 6) || var(30) = 4
trigger1 = roundno >= 1
fvar(7) = 0 

[State 5900, 3] ;Intro
type = ChangeState
trigger1 = roundno = 1
trigger2 = teammode = turns
trigger2 = roundno > 1
trigger2 = time = 0
trigger2 = roundstate = 0
trigger2 = roundsexisted <= 0
value = 190

;=====================================================================
; commonステート上書き
;=====================================================================
;---------------------------------------------------------------------
; Jump Start
[Statedef 40]
type    = S
physics = S
anim = ifelse(Var(30)>3,39,40)
ctrl = 0
sprpriority = 1
velset = 0,0

[State 40, 2]
type = Turn
trigger1 = NumEnemy && Time = 0 && (PrevStateNo != [100,101]) && (PrevStateNo != [110,111]) && PrevStateNo != 4100
trigger1 = (enemynear,Pos X - Pos X) * facing < 0

[State 40, 1]
type = VarSet
trigger1 = Time = 0
trigger1 = PrevStateNo = [700,799]
var(36) = 1

[State 40, 1]
type = VarSet
trigger1 = Time = 0
var(32) = 0

[State 40, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 40, 2]
type = VarSet
trigger1 = command = "holdfwd"
sysvar(1) = 1

[State 40, 3]
type = VarSet
trigger1 = command = "holdback"
sysvar(1) = -1

;------------------------ 小ジャンプ
[State 40,VelSet]
type = VelSet
triggerall = AnimTime = 0
trigger1 = PrevStateNo != 100 && PrevStateNo != 110 && PrevStateNo != 4100 && Command != "holdup" && (var(31) = 0 || var(31) > 0 && sysvar(1) = 0)
x = ifelse(sysvar(1)=0,0,ifelse(sysvar(1)=1,const(velocity.jump.fwd.x),const(velocity.jump.back.x)))
y = floor(Const(velocity.jump.y)*.65)

[State 40, VarSet(12)]
type = VarSet
triggerall = AnimTime = 0 && var(32) = 0
trigger1 = PrevStateNo != 100 && PrevStateNo != 110 && PrevStateNo != 4100 && Command != "holdup" && (var(31) = 0 || var(31) > 0 && sysvar(1) = 0)
var(32) = 2

;------------------------ 中ジャンプ
[State 40,VelSet]
type = VelSet
triggerall = AnimTime = 0 && Command != "holdup"
trigger1 = PrevStateNo != 100 && PrevStateNo != 110 && PrevStateNo != 4100 && var(31) > 0 && sysvar(1) != 0
trigger2 = (PrevStateNo = 100 || PrevStateNo = 110 || PrevStateNo = 4100) && sysvar(1) = 1
x = ifelse(sysvar(1)=1,const(velocity.runjump.fwd.x),const(velocity.runjump.back.x))
y = floor(Const(velocity.jump.y)*.65)

[State 40, VarSet(12)]
type = VarSet
triggerall = AnimTime = 0 && var(32) = 0 && Command != "holdup"
trigger1 = PrevStateNo != 100 && PrevStateNo != 110 && PrevStateNo != 4100 && var(31) > 0 && sysvar(1) != 0
trigger2 = (PrevStateNo = 100 || PrevStateNo = 110 || PrevStateNo != 4100) && sysvar(1) = 1
var(32) = 3

;------------------------ 大ジャンプ
[State 40,VelSet]
type = VelSet
triggerall = AnimTime = 0 && (Command = "holdup" || var(30) < 3 && var(32) = 3)
trigger1 = PrevStateNo != 100 && PrevStateNo != 110 && PrevStateNo != 4100 && var(31) > 0
trigger2 = (PrevStateNo = 100 || PrevStateNo = 110 || PrevStateNo = 4100) && sysvar(1) = 1
x = ifelse(sysvar(1)=0,0,ifelse(sysvar(1)=1,const(velocity.jump.fwd.x)*1.5,const(velocity.jump.back.x)*1.5))
y = ifelse(sysvar(1)=0,const(velocity.jump.y)*1.10,const(velocity.jump.y))

[State 40, VarSet(12)]
type = VarSet
triggerall = AnimTime = 0 && (var(32) = 0 || var(30) < 3 && var(32) = 3)
trigger1 = PrevStateNo != 100 && PrevStateNo != 110 && PrevStateNo != 4100 && Command = "holdup" && var(31) > 0
trigger2 = (PrevStateNo = 100 || PrevStateNo = 110 || PrevStateNo = 4100) && sysvar(1) = 1
var(32) = 4

;------------------------ ノーマルジャンプ
[State 40,VelSet]
type = VelSet
triggerall = AnimTime = 0
trigger1 = PrevStateNo != 100 && PrevStateNo != 110 && PrevStateNo != 4100 && Command = "holdup" && (var(31) = 0 || (var(32)!=4 && var(31)>0 && sysvar(1) = 0))
trigger2 = var(30) < 3 && var(32) = 2
x = ifelse(sysvar(1)=0,0,ifelse(sysvar(1)=1,const(velocity.jump.fwd.x),const(velocity.jump.back.x)))
y = Const(velocity.jump.y)

[State 40, VarSet(12)]
type = VarSet
triggerall = AnimTime = 0 && (var(32) = 0 || var(30) < 3 && var(32) = 2)
trigger1 = PrevStateNo != 100 && PrevStateNo != 110 && PrevStateNo != 4100 && Command = "holdup" && (var(31) = 0 || (var(32)!=4 && var(31)>0 && sysvar(1) = 0))
var(32) = 1

[State 45, PlaySnd]
type = PlaySND
trigger1 = AnimTime = 0
value = 1,ifelse(var(32) >= 3,1,0)

[State 3100, AfterImage]
type = AfterImage
triggerall = Var(30) = 1 || Var(30) = 2 && !fvar(8) || (Var(30) = [3,6])
trigger1 = AnimTime = 0 && var(32) >= 3
time = 20
length = 9
TimeGap  = 2
FrameGap = 3
palbright = 0,0,0
palcontrast = 100,100,100
palpostbright = 0,0,0
paladd = -30,-30,-30
palmul = .75,.75,.75
trans = add1

[State 3001, Super]
type = Helper
trigger1 = AnimTime = 0
id = 2100
name = "jump Effect"
pos =0,0
postype = P1
stateno = 2100
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1

[State 4600,10]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

;---------------------------------------------------------------------------
; Jump Up
[Statedef 50]
type    = A
physics = A

[State 50, 1]
type = VarSet
trigger1 = Time = 0
var(31) = 0

[State 50, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 50, 2]
type = ChangeAnim
trigger1 = Time = 0
value = ifelse((vel x)=0, 41, ifelse((vel x)>0, 42, 43))

[State 50, 2]
type = ChangeAnim
trigger1 = Time = 0 && PrevStateNo = 4210
value = 41

[State 50, 3]
type = ChangeAnim
trigger1 = Vel y > -2
trigger1 = SelfAnimExist(anim + 3)
persistent = 0
value = Anim + 3

;---------------------------------------------------------------------------
; 着地
[Statedef 52]
type    = S
physics = S
anim = ifelse(Var(32)=2,48,47)
ctrl = 0
velset = 0, 0

[State 52, PosSet]
type = PosSet
trigger1 = Time = 0
y = 0

[State -2,4]
type = PlaySnd
trigger1 = Time = 1
value = 1,3

[State 52, 3]
type = CtrlSet
triggerall = prevstateno != [600,799]
trigger1 = Time = 1
value = 1

[State 52, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; HITA_FALL (knocked up, falling)
[Statedef 5050]
type    = A
movetype= H
physics = N

[State 5050, 1] ;Change anim when done with transition
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim = 5035
trigger2 = Time = 0     ;If no transition anim
trigger2 = Anim != 5035
trigger2 = (Anim != [5051, 5059]) && (Anim != [5061, 5069])
trigger2 = Anim != 5090 ;Not if hit off ground anim
value = 5050

[State 5050, 2] ;Coming down anim
type = ChangeAnim
trigger1 = anim = [5050,5059]
trigger1 = Vel Y >= ifelse(anim = 5050, 1, -2)
trigger1 = SelfAnimExist(anim+10)
value = anim+10
persistent = 0

[State 5050, 3] ;Gravity
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5050, 5-1]
type = ChangeState
triggerall = Vel Y > -1
triggerall = Pos Y <= -32
triggerall = alive
triggerall = CanRecover
trigger1 = Command = "recovery" && Command = "holdfwd"
value = 5211

[State 5050, 5-2]
type = ChangeState
triggerall = Vel Y > -1
triggerall = Pos Y <= -16
triggerall = alive
triggerall = CanRecover
trigger1 = Command = "recovery" && Command = "holdback"
value = 5212

[State 5050, 5-3]
type = ChangeState
triggerall = Vel Y > -1
triggerall = Pos Y <= -48
triggerall = alive
triggerall = CanRecover
trigger1 = Command = "recovery" && Command != "holdback" && Command != "holdfwd"
value = 5210

[State 5050, 6]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= ifelse((anim = [5051,5059]) || (anim = [5061,5069]), 0, 25)
value = 5100 ;HIT_BOUNCE

;---------------------------------------------------------------------------
; HIT_BOUNCE (hit ground)
[Statedef 5100]
type    = L
movetype= H
physics = N

[State 5100, 1]
type = VelSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
trigger1 = vel x > 1
x = 1

[State 5100, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 5100, Var] ;Save fall velocity
type = VarSet
trigger1 = Time = 0
sysvar(1) = floor(vel y)

[State 5100, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = (anim != [5051,5059]) && (anim != [5061,5069])
trigger2 = !SelfAnimExist(5100 + (anim % 10))
value = 5100

[State 5100, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
trigger1 = time = 0
trigger1 = (anim = [5051,5059]) || (anim = [5061,5069])
trigger1 = SelfAnimExist(5100 + (anim % 10))
value = 5100 + (anim % 10)

[State 5100, 4]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5100, 5]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5100, 6] ;Reduce speed
type = VelMul
trigger1 = Time = 0
x = 0.75

[State 5050, 5]
type = ChangeState
;triggerall = Var(30) = 2 || Var(30) = 5 || Var(30) = 6
triggerall = PrevStateNo = 5050
triggerall = alive
triggerall = CanRecover
trigger1 = Command = "recovery_ground"
value = 5201

[State 5100, 7]
type = ChangeState
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
value = 5110 ;HIT_LIEDOWN

[State 5100, 8]
type = GameMakeAnim
trigger1 = Time = 1
value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
pos = 0, 0
under = sysvar(1) <= 14

[State 5100, 9]
type = HitFallDamage
trigger1 = Time = 3

[State 5100, 10]
type = PlaySnd
trigger1 = Time = 1
value = F7, (sysvar(1) > 5) + (sysvar(1) > 14)

[State 5100, 11]
type = PosFreeze
trigger1 = 1

[State 5100, 12]
type = ChangeState
trigger1 = AnimTime = 0
value = 5101

[State 5100, 13]
type = ForceFeedback
trigger1 = Time = 0
waveform = sinesquare
ampl = 128,-3,-.2,.005
time = 20

;---------------------------------------------------------------------------
; HIT_LIEDEAD
[Statedef 5150]
type    = L
movetype= H
physics = N
sprpriority = -3

[State 5150, 1] ;Normal anim
type = ChangeAnim
triggerall = PrevStateNo != 5950
triggerall = Time = 0
triggerall = SelfAnimExist(5140)
trigger1 = (anim != [5111,5119]) && (anim != [5171,5179])
trigger2 = !SelfAnimExist(5140 + (anim % 10))
value = 5140

[State 5150, 3] ;Hit up type anim
type = ChangeAnim
triggerall = PrevStateNo != 5950
trigger1 = Time = 0
trigger1 = (anim = [5111,5119]) || (anim = [5171,5179])
trigger1 = SelfAnimExist(5140 + (anim % 10))
value = 5140 + (anim % 10)

[State 5150, 4] ;Match over anim
type = ChangeAnim
persistent = 0
triggerall = PrevStateNo != 5950
trigger1 = MatchOver = 1
trigger1 = Anim != 5960
trigger1 = Anim = [5140,5149]
trigger1 = SelfAnimExist(anim+10)
value = anim+10

[State 5150, 5]
type = ChangeAnim
triggerall = PrevStateNo != 5950
trigger1 = Time = 0
trigger1 = Anim != 5960
trigger1 = Anim != [5140,5159]
trigger1 = Anim != [5110,5119]
value = 5110

[State 5150, 6] ;Friction
type = VelMul
trigger1 = 1
x = 0.85

[State 5150, 7] ;Friction
type = VelSet
trigger1 = Vel x < .05
persistent = 0
x = 0

[State 5150, 8]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; 空中受身（中立）
[Statedef 5210]
type    = A
movetype= I
physics = N
anim = 5210
ctrl = 0

[State 5210, 1] ;Blink white
type = PalFX
trigger1 = Time = 0
time = 3
add = 255,255,255

[State 5210, 2] ;Turn if not facing opponent
type = Turn
trigger1 = Time = 0
trigger1 = p2dist X < -20

[State 5210, 3]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 12

[State 5210, 4]
type = CtrlSet
trigger1 = Time = 13
value = 1

[State 5210, 5]
type = VelAdd;Gravity
trigger1 = 1
y = .45

[State 5210, 5] ;Land on ground
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 52 ;JUMP_LAND
ctrl = 1

;---------------------------------------------------------------------------
; 空中受身（前方）
[Statedef 5211]
type    = A
movetype= I
physics = N
anim = 5210
ctrl = 0
velset = -1,-4

[State 5210, 1] ;Blink white
type = PalFX
trigger1 = Time = 0
time = 3
add = 255,255,255

[State 5210, 2] ;Turn if not facing opponent
type = Turn
trigger1 = Time = 0
trigger1 = p2dist X < -20

[State 5210, 3]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 10

[State 5210, 4]
type = CtrlSet
trigger1 = Time = 11
value = 1

[State 5210, 5]
type = VelAdd;Gravity
trigger1 = 1
y = .45

[State 5210, 5] ;Land on ground
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 52 ;JUMP_LAND
ctrl = 1

;---------------------------------------------------------------------------
; 空中受身（後方）
[Statedef 5212]
type    = A
movetype= I
physics = N
anim = 5210
ctrl = 0
velset = -3,-6

[State 5210, 1] ;Blink white
type = PalFX
trigger1 = Time = 0
time = 3
add = 255,255,255

[State 5210, 2] ;Turn if not facing opponent
type = Turn
trigger1 = Time = 0
trigger1 = p2dist X < -20

[State 5210, 3]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 14

[State 5210, 4]
type = CtrlSet
trigger1 = Time = 15
value = 1

[State 5210, 5]
type = VelAdd;Gravity
trigger1 = 1
y = .45

[State 5210, 5] ;Land on ground
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 52 ;JUMP_LAND
ctrl = 1

;---------------------------------------------------------------------
; 削られKO
;------------------------ 
[Statedef 5950]
type = U
movetype = H
physics = U
ctrl = 0
velset = 0, 0

[State 154, 1]
type = ChangeAnim
trigger1 = HitOver!
trigger1 = P1name = "cvsiori"
trigger1 = Var(29)
value = ifelse((var(38) = 1),10150,10151)

[State 154, 1]
type = ChangeAnim
trigger1 = anim != [10150,10151]
trigger1 = HitOver!
value = ifelse((var(38) = 1),150,151)

[State 5000, 5]
type = StateTypeSet
trigger1 = Time = 0
trigger1 = var(38) = 1
type = S
physics = S

[State 5000, 5]
type = StateTypeSet
trigger1 = Time = 0
trigger1 = var(38) = 2
type = C
physics = C

[State 151, 1]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5201,NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 151, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 151, 2]
type = VelSet
trigger1 = Time = GetHitVar(slidetime)
trigger2 = HitOver
x = 0

[State 154, 1]
type = ChangeAnim
trigger1 = P1name = "cvsiori"
trigger1 = Var(29)
trigger1 = HitOver && anim != 15950
value = 15950

[State 154, 1]
type = ChangeAnim
trigger1 = anim != 15950
trigger1 = HitOver && anim != 5950
value = 5950

[State -3,PlaySnd]
type = PlaySnd
trigger1 = anim = 5950
trigger1 = AnimElem = 1,=0
value = 5950, 0

[State -3,PlaySnd]
type = PlaySnd
trigger1 = anim = 15950
trigger1 = AnimElem = 1,=0
value = 15950, 0

[State 105,End]
type = ChangeState
trigger1 = anim = 5950 || anim = 15950
trigger1 = HitOver
value = 5150
ctrl = 0

;=====================================================================
; 特殊エフェクト関連
;=====================================================================
;---------------------------------------------------------------------------
; ジャンプエフェクト
;------------------------ 1
[Statedef 2100]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000
velset = 0,0
ownpal = 1

[State 1000, 0]
type = BindToRoot
trigger1 = Time > 0
pos = 0,0

[State 4110, Explod]
type = Explod
trigger1 = Time = 0
anim = 2105
pos = 0,0
postype = P1
scale = .5,.5
sprpriority = 5
ownpal = 0

[State 4110, Explod]
type = Explod
trigger1 = Time = 0 || Time = 2 || Time = 6
anim = 2100
pos = 0,0
postype = P1
scale = .5,.5
sprpriority = 5
ownpal = 0

[State 4110, DestroySelf]
type = DestroySelf
trigger1 = Time >= 20

;---------------------------------------------------------------------------
; パワー溜めエフェクト
;------------------------ 
[Statedef 2200]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000
velset = 0,0

[State 200,PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 20,3
channel = 1

[State 4110, BindToParent]
type = BindToParent
trigger1 = 1
pos = 0,0

[State 4110, Explod]
type = Explod
trigger1 = Time = 0 && NumExplod(2200) = 0
anim = 2200
id = 2200
pos = 0,0
scale = .5,.5
postype = P1
sprpriority = -1
bindtime = -1
ownpal = 0
removetime = -1
facing = 1
persistent = 0

[State 4110, Explod]
type = Explod
trigger1 = Time = 0 && NumExplod(2205) = 0
anim = 2205
id = 2205
pos = 0,0
scale = .5,0
postype = P1
sprpriority = 2
bindtime = -1
ownpal = 0
removetime = -1
facing = 1
persistent = 0

[State 4110, ModifyExplod]
type = ModifyExplod
trigger1 = root,fvar(7) = [0,19]
ID = 2205
scale  = .5,0

[State 4110, ModifyExplod]
type = ModifyExplod
trigger1 = root,fvar(7) = [20,29]
ID = 2205
scale  = .5,.0625

[State 4110, ModifyExplod]
type = ModifyExplod
trigger1 = root,fvar(7) = [30,49]
ID = 2205
scale  = .5,.1275

[State 4110, ModifyExplod]
type = ModifyExplod
trigger1 = root,fvar(7) = [50,79]
ID = 2205
scale  = .5,.25

[State 4110, ModifyExplod]
type = ModifyExplod
trigger1 = root,fvar(7) = [80,100]
ID = 2205
scale  = .5,.5

[State 820,PlaySnd]
type = Stopsnd
trigger1 = Root,StateNo != [4100,4101]
channel = 1

[State 4110, RemoveExplod]
type = RemoveExplod
trigger1 = Root,StateNo != [4100,4101]
id = 2200

[State 4110, RemoveExplod]
type = RemoveExplod
trigger1 = Root,StateNo != [4100,4101]
id = 2205

[State 4110, DestroySelf]
type = DestroySelf
trigger1 = Root,StateNo != [4100,4101]

;---------------------------------------------------------------------
; オリコン発動エフェクト
;------------------------ 
[Statedef 2330]
type    = A
movetype= I
physics = N
anim = 20000
velset = 0,0
ctrl = 0

[State 1000, 0]
type = BGPalFX
trigger1 = 1
time = 1
invertall = 1

[State 200,PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = 20,2
persistent = 0

[State -2, 1]
type = PalFX
trigger1 = time = 0
time = 1
add = 0,0,0

[State -2, Explod(P1)]
type = Explod
trigger1 = Time = 1
anim = 2330
id = 2330
pos = 0,0
postype = P1
scale = 1,1
sprpriority = 5
supermove = 1
bindtime = -1
ownpal = 0
persistent = 0
pausemovetime = 999999
Supermovetime = 999999

[State -2, 1]
type = PalFX
trigger1 = time = 18
time = 1
add = -100,-100,-100

[State -3, Burst]
type = VarSet
trigger1 = Time = 1
fvar(1) = 1

[State -3, Burst]
type = VarAdd
trigger1 = Time < 18
trigger1 = fvar(1) > 0
fvar(1) = -.06

[State -3, Burst]
type = VarSet
trigger1 = Time = 19
fvar(1) = 1

[State -3, Burst]
type = VarAdd
trigger1 = Time > 19
fvar(1) = .5

[State 4900, 16]
type = modifyExplod
trigger1 = 1
Id = 2330
scale = fvar(1),fvar(1)

[State -2, Explod(P1)]
type = Explod
trigger1 = Time = 2
anim = 2331
id = 2331
pos = 0,0
postype = P1
scale = .075,.075
sprpriority = 5
supermove = 1
bindtime = -1
removetime = -1
ownpal = 1
persistent = 0
pausemovetime = 999999
Supermovetime = 999999

[State -3, Burst]
type = VarSet
trigger1 = Time = 2
fvar(2) = .075

[State -3, Burst]
type = VarAdd
trigger1 = Time > 2
trigger1 = fvar(1) < .875
fvar(2) = .07

[State 4900, 16]
type = modifyExplod
trigger1 = 1
Id = 2331
scale = fvar(2),fvar(2)

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = Time = 29
id = 2330

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = Time = 29
id = 2331

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = Time = 29
id = 2332

[State 1150, ChangeState]
type = DestroySelf
trigger1 = Time = 29

;---------------------------------------------------------------------
; カウンターヒットエフェクト
;------------------------ 1
[Statedef 2030]
type    = A
movetype= I
physics = N
anim = 20000
velset = 0,0
ctrl = 0

[State -2, 1]
type = PalFX
trigger1 = time = 0
time = 1
add = 0,0,0

[State -2, Explod(P1)]
type = Explod
trigger1 = Time = 0
anim = 2030
id = 2030
pos = 0,0
postype = P1
scale = .275,.275
sprpriority = 5
supermove = 1
bindtime = -1
removetime = -1
ownpal = 0
persistent = 0
pausemovetime = 999999
Supermovetime = 999999

[State -3, Burst]
type = VarSet
trigger1 = Time = 0
fvar(1) = .275

[State -3, Burst]
type = VarAdd
trigger1 = fvar(1) > 0
fvar(1) = .05

[State 4900, 16]
type = modifyExplod
trigger1 = 1
Id = 2030
scale = fvar(1),fvar(1)

[State -2, 1]
type = PalFX
trigger1 = time = 5
time = 1
add = -50,-50,-50

[State -2, 1]
type = PalFX
trigger1 = time = 6
time = 1
add = -120,-120,-120

[State -2, 1]
type = PalFX
trigger1 = time = 7
time = 1
add = -190,-190,-190

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = Time > 7
id = 2030

[State 1150, ChangeState]
type = DestroySelf
trigger1 = Time > 7

;---------------------------------------------------------------------
; ガードキャンセルエフェクト
;------------------------ 
[Statedef 2320]
type    = A
movetype= I
physics = N
anim = 20000
velset = 0,0
ctrl = 0

[State -2, 1]
type = PalFX
trigger1 = time = 0
time = 1
add = 0,0,0

[State -2, Explod(P1)]
type = Explod
trigger1 = Time = 0
anim = 2320
id = 2320
pos = 0,0
postype = P1
scale = 0,0
sprpriority = 5
supermove = 1
bindtime = -1
removeTime = -1
ownpal = 0
persistent = 0
pausemovetime = 999999
Supermovetime = 999999

[State -3, Burst]
type = VarSet
trigger1 = Time = 0
fvar(1) = .15

[State -3, Burst]
type = VarAdd
trigger1 = Time > 0
fvar(1) = .05

[State 4900, 16]
type = modifyExplod
trigger1 = 1
Id = 2320
scale = fvar(1),fvar(1)

[State -3, Burst]
type = VarSet
trigger1 = Time = 0
var(1) = 0

[State -3, Burst]
type = VarAdd
trigger1 = Time > 3
var(1) = -43

[State -2, 1]
type = PalFX
trigger1 = Time > 3
time = 1
add = var(1),var(1),var(1)

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = Time > 10
id = 2320

[State 1150, ChangeState]
type = DestroySelf
trigger1 = Time > 10

;---------------------------------------------------------------------------
; ブロッキングヘルパー
;------------------------  上段
[Statedef 4310]
type = A
movetype = A
physics = N
ctrl = 0
velset = 0,0

[State 10000, Bind]
type = ChangeAnim
trigger1 = parent,statetype = S
value = 4310

[State 10000, Bind]
type = ChangeAnim
trigger1 = parent,statetype = C
value = 4311

[State 10000, Bind]
type = ChangeAnim
trigger1 = parent,statetype = A
value = 4312

[State 10000, Bind]
type = BindToParent
trigger1 = 1
pos = 0,0

[State 10000, End]
type = VarSet
trigger1 = Time = 0
var(1) = 23

[State 10000, End]
type = VarSet
trigger1 = Time = 0
var(2) = 5

[State 10000, End]
type = Varadd
trigger1 = parent,Command != "Not-Neutral"
var(2) = 5
persistent = 0

[State 10000, End]
type = Varadd
trigger1 = 1
var(1) = -1

[State 10000, End]
type = Varadd
trigger1 = 1
var(2) = -1

[State 10000, End]
type = ParentVarSet
trigger1 = Time = 0
var(35) = 0

[State 10000, Bind]
type = ReversalDef
trigger1 = parent,statetype != A
reversal.attr = SA,NA,SA,HA
pausetime = 0,18
sparkno = -1

[State 10000, Bind]
type = ReversalDef
trigger1 = parent,statetype = A
reversal.attr = SCA,NA,SA,HA
pausetime = 0,18
sparkno = -1

[State 10000, Bind]
type = ParentVarSet
trigger1 = MoveContact
var(35) = 1

[State 10000, Bind]
type = DestroySelf
trigger1 = parent,MoveType = H
trigger2 = parent,StateNo = [1000,3999]

[State 190, 1]
type = ChangeState
trigger1 = var(2) = 0
value = 4320

;------------------------  下段
[Statedef 4311]
type = A
movetype = A
physics = N
ctrl = 0
velset = 0,0

[State 10000, Bind]
type = ChangeAnim
trigger1 = parent,statetype = S
value = 4310

[State 10000, Bind]
type = ChangeAnim
trigger1 = parent,statetype = C
value = 4311

[State 10000, Bind]
type = ChangeAnim
trigger1 = parent,statetype = A
value = 4312

[State 10000, Bind]
type = BindToParent
trigger1 = 1
pos = 0,0

[State 10000, End]
type = VarSet
trigger1 = Time = 0
var(1) = 23

[State 10000, End]
type = VarSet
trigger1 = Time = 0
var(2) = 5

[State 10000, End]
type = Varadd
trigger1 = parent,Command != "Not-Neutral"
var(2) = 5
persistent = 0

[State 10000, End]
type = Varadd
trigger1 = 1
var(1) = -1

[State 10000, End]
type = Varadd
trigger1 = 1
var(2) = -1

[State 10000, End]
type = ParentVarSet
trigger1 = Time = 0
var(35) = 0

[State 10000, Bind]
type = ReversalDef
trigger1 = parent,statetype != A
reversal.attr = C,NA,SA,HA
pausetime = 0,18
sparkno = -1

[State 10000, Bind]
type = ReversalDef
trigger1 = parent,statetype = A
reversal.attr = SCA,NA,SA,HA
pausetime = 0,18
sparkno = -1

[State 10000, Bind]
type = ParentVarSet
trigger1 = MoveContact
var(35) = 2

[State 10000, Bind]
type = DestroySelf
trigger1 = parent,MoveType = H
trigger2 = parent,StateNo = [1000,3999]

[State 190, 1]
type = ChangeState
trigger1 = var(2) = 0
value = 4320

;------------------------ 消滅
[Statedef 4320]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000

[State 10000, End]
type = Varadd
trigger1 = 1
var(1) = -1

[STate 1115,1]
type = DestroySelf
trigger1 = var(1) = 0

;---------------------------------------------------------------------------
; メッセージアイコン
;------------------------ "FIRST ATTACK"
[Statedef 2600]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000
velset = 0,0
[State -2,2]
type = VarSet
trigger1 = time = 0
var(1) = Parent,Var(45)
[STate 1115,1]
type = ChangeState
trigger1 = Time = 0
value = 2610
;------------------------ "COUNTER HIT"
[Statedef 2601]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000
velset = 0,0
[State -2,2]
type = VarSet
trigger1 = time = 0
var(1) = Parent,Var(45)
[STate 1115,1]
type = ChangeState
trigger1 = Time = 0
value = 2610
;------------------------ "TECH BOUNS"
[Statedef 2602]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000
velset = 0,0
[State -2,2]
type = VarSet
trigger1 = time = 0
var(1) = Parent,Var(45)
[STate 1115,1]
type = ChangeState
trigger1 = Time = 0
value = 2610
;------------------------ "GUARD CANCEL"
[Statedef 2603]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000
velset = 0,0
[State -2,2]
type = VarSet
trigger1 = time = 0
var(1) = Parent,Var(45)
[STate 1115,1]
type = ChangeState
trigger1 = Time = 0
value = 2610
;------------------------ "JUST DEFENDED"
[Statedef 2604]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000
velset = 0,0
[State -2,2]
type = VarSet
trigger1 = time = 0
var(1) = Parent,Var(45)
[STate 1115,1]
type = ChangeState
trigger1 = Time = 0
value = 2610
;------------------------ "BLOCKING"
[Statedef 2605]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000
velset = 0,0
[State -2,2]
type = VarSet
trigger1 = time = 0
var(1) = Parent,Var(45)
[STate 1115,1]
type = ChangeState
trigger1 = Time = 0
value = 2610

;------------------------ 
[Statedef 2610]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000
velset = 0,0
ownpal = 1

[State 4110, Explod]
type = Explod
trigger1 = time = 1 && teamside = 1
anim = 2600
id = 2600
scale = .5,.5
pos = -52,56+(var(1))*19
postype = Left
bindtime = 1
facing = 1
ontop = 1
persistent = 0
supermovetime = 9999999999999999
pausemovetime = 9999999999999999

[State 4110, Explod]
type = Explod
trigger1 = time = 1 && teamside = 1
anim = PrevStateNo+10
id = 2600
scale = .5,.5
pos = -52,56+(var(1))*19
postype = Left
bindtime = 1
facing = 1
ontop = 1
persistent = 0
supermovetime = 9999999999999999
pausemovetime = 9999999999999999

[State 1000, 0]
type = ModifyExplod
trigger1 = time = 2 && teamside = 1
ID = 2600
pos = -34,56+(var(1))*19
postype = Left
[State 1000, 0]
type = ModifyExplod
trigger1 = time = 3 && teamside = 1
ID = 2600
pos = -15,56+(var(1))*19
postype = Left
[State 1000, 0]
type = ModifyExplod
trigger1 = time = 4 && teamside = 1
ID = 2600
pos = -4,56+(var(1))*19
postype = Left
[State 1000, 0]
type = ModifyExplod
trigger1 = time = 5 && teamside = 1
ID = 2600
pos = 22,56+(var(1))*19
postype = Left
[State 1000, 0]
type = ModifyExplod
trigger1 = time = 6 && teamside = 1
ID = 2600
pos = 41,56+(var(1))*19
postype = Left
[State 1000, 0]
type = ModifyExplod
trigger1 = time >= 7 && teamside = 1
ID = 2600
pos = 59,56+(var(1))*19
postype = Left

[State 4110, Explod]
type = Explod
trigger1 = time = 1 && teamside = 2
anim = 2600
id = 2600
scale = .5,.5
pos = 52,56+(Parent,var(45))*19
postype = Right
facing = -1
bindtime = 1
ontop = 1
persistent = 0
supermovetime = 9999999999999999
pausemovetime = 9999999999999999

[State 4110, Explod]
type = Explod
trigger1 = time = 1 && teamside = 2
anim = PrevStateNo+10
id = 2600
scale = .5,.5
pos = 52,56+(Parent,var(45))*19
postype = Right
facing = 1
bindtime = 1
ontop = 1
persistent = 0
supermovetime = 9999999999999999
pausemovetime = 9999999999999999

[State 1000, 0]
type = ModifyExplod
trigger1 = time = 2 && teamside = 2
ID = 2600
pos = 34,56+(var(1))*19
postype = Right
[State 1000, 0]
type = ModifyExplod
trigger1 = time = 3 && teamside = 2
ID = 2600
pos = 15,56+(var(1))*19
postype = Right
[State 1000, 0]
type = ModifyExplod
trigger1 = time = 4 && teamside = 2
ID = 2600
pos = 4,56+(var(1))*19
postype = Right
[State 1000, 0]
type = ModifyExplod
trigger1 = time = 5 && teamside = 2
ID = 2600
pos = -22,56+(var(1))*19
postype = Right
[State 1000, 0]
type = ModifyExplod
trigger1 = time = 6 && teamside = 2
ID = 2600
pos = -41,56+(var(1))*19
postype = Right
[State 1000, 0]
type = ModifyExplod
trigger1 = time >= 7 && teamside = 2
ID = 2600
pos = -59,56+(var(1))*19
postype = Right

[State 1000, 0]
type = ModifyExplod
trigger1 = time = 91
ID = 2600
scale = .5,.4
[State 1000, 0]
type = ModifyExplod
trigger1 = time = 92
ID = 2600
scale = .5,.3
[State 1000, 0]
type = ModifyExplod
trigger1 = time = 93
ID = 2600
scale = .5,.2
[State 1000, 0]
type = ModifyExplod
trigger1 = time = 94
ID = 2600
scale = .5,.1
[State 1000, 0]
type = ModifyExplod
trigger1 = time = 95
ID = 2600
scale = .5,.0
[State 1000, 0]
type = ModifyExplod
trigger1 = time = 96
ID = 2600
scale = .5,.5

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = time > 110
ID = 2600

[State 4110, DestroySelf]
type = DestroySelf
trigger1 = time > 110

;---------------------------------------------------------------------------
; グルーヴセレクトアイコン
;------------------------ C
[Statedef 20001]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000
velset = 0,0
ownpal = 1
sprpriority = 7

[State -2, 3]
type = ParentVarSet
trigger1 = 1
var(50) = 10

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = 1
id = 20002
[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = 1
id = 20003
[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = 1
id = 20004
[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = 1
id = 20005
[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = 1
id = 20006

[State 810,Explod]
type = Explod
trigger1 = NumExplod(20001)!
anim = 20001
id = 20001
pos = 0,0
scale = .5,.5
postype = P1
sprpriority = 4
bindtime = -1
removetime =999999
ownpal = 1
removeongethit = 1
ontop = 1
facing = 1

[State -2, 3]
type = ParentVarSet
trigger1 = 1
var(30) = 1

[State 30050, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

[State 200, 3]
type = Playsnd
triggerall = time > 8
trigger1 = Root,command = "holdup" || Root,command = "holddown"
value = 10,0
channel = 10

[State 190, 1]
type = ChangeState
triggerall = time > 8
trigger1 = Root,command = "holdup" || Root,command = "holddown"
value = 20006+(Root,command = "holddown")*-4

[STate 1115,1]
type = ChangeState
trigger1 = Root,command = "a" || Root,command = "b" || Root,command = "c" || Root,command = "x" || Root,command = "y" || Root,command = "z"
trigger2 = roundstate > 1
trigger3 = Root,StateNo = 0 && Time > 60
value = 20050

;------------------------ A
[Statedef 20002]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000
velset = 0,0
ownpal = 1
sprpriority = 7

[State -2, 3]
type = ParentVarSet
trigger1 = 1
var(50) = 10

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = 1
id = 20001
[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = 1
id = 20003
[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = 1
id = 20004
[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = 1
id = 20005
[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = 1
id = 20006

[State 810,Explod]
type = Explod
trigger1 = NumExplod(20002)!
anim = 20002
id = 20002
pos = 0,0
scale = .5,.5
postype = P1
sprpriority = 4
bindtime = -1
removetime =999999
ownpal = 1
removeongethit = 1
ontop = 1

[State -2, 3]
type = ParentVarSet
trigger1 = 1
var(30) = 2

[State 30050, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

[State 200, 3]
type = Playsnd
triggerall = time > 8
trigger1 = Root,command = "holdup" || Root,command = "holddown"
value = 10,0
channel = 10

[State 190, 1]
type = ChangeState
triggerall = time > 8
trigger1 = Root,command = "holdup" || Root,command = "holddown"
value = 20001+(Root,command = "holddown")*2

[STate 1115,1]
type = ChangeState
trigger1 = Root,command = "a" || Root,command = "b" || Root,command = "c" || Root,command = "x" || Root,command = "y" || Root,command = "z"
trigger2 = roundstate > 1
trigger3 = Root,StateNo = 0 && Time > 60
value = 20050

;------------------------ P
[Statedef 20003]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000
velset = 0,0
ownpal = 1
sprpriority = 7

[State -2, 3]
type = ParentVarSet
trigger1 = 1
var(50) = 10

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = 1
id = 20001
[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = 1
id = 20002
[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = 1
id = 20004
[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = 1
id = 20005
[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = 1
id = 20006

[State 810,Explod]
type = Explod
trigger1 = NumExplod(20002)!
anim = 20003
id = 20003
pos = 0,0
scale = .5,.5
postype = P1
sprpriority = 4
bindtime = -1
removetime =999999
ownpal = 1
removeongethit = 1
ontop = 1

[State -2, 3]
type = ParentVarSet
trigger1 = 1
var(30) = 3

[State 30050, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

[State 200, 3]
type = Playsnd
triggerall = time > 8
trigger1 = Root,command = "holdup" || Root,command = "holddown"
value = 10,0
channel = 10

[State 190, 1]
type = ChangeState
triggerall = time > 8
trigger1 = Root,command = "holdup" || Root,command = "holddown"
value = 20002+(Root,command = "holddown")*2

[STate 1115,1]
type = ChangeState
trigger1 = Root,command = "a" || Root,command = "b" || Root,command = "c" || Root,command = "x" || Root,command = "y" || Root,command = "z"
trigger2 = roundstate > 1
trigger3 = Root,StateNo = 0 && Time > 60
value = 20050

;------------------------ S
[Statedef 20004]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000
velset = 0,0
ownpal = 1
sprpriority = 7

[State -2, 3]
type = ParentVarSet
trigger1 = 1
var(50) = 10

[State -2, Remove Mode Bar]
type = RemoveExplod
trigger1 = 1
id = 20001
[State -2, Remove Mode Bar]
type = RemoveExplod
trigger1 = 1
id = 20002
[State -2, Remove Mode Bar]
type = RemoveExplod
trigger1 = 1
id = 20003
[State -2, Remove Mode Bar]
type = RemoveExplod
trigger1 = 1
id = 20005
[State -2, Remove Mode Bar]
type = RemoveExplod
trigger1 = 1
id = 20006

[State 810,Explod]
type = Explod
trigger1 = NumExplod(20004)!
anim = 20004
id = 20004
pos = 0,0
scale = .5,.5
postype = P1
sprpriority = 4
bindtime = -1
removetime =999999
ownpal = 1
removeongethit = 1
ontop = 1
facing = 1

[State -2, 3]
type = ParentVarSet
trigger1 = 1
var(30) = 4

[State 30050, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

[State 200, 3]
type = Playsnd
triggerall = time > 8
trigger1 = Root,command = "holdup" || Root,command = "holddown"
value = 10,0
channel = 10

[State 190, 1]
type = ChangeState
triggerall = time > 8
trigger1 = Root,command = "holdup" || Root,command = "holddown"
value = 20003+(Root,command = "holddown")*2

[STate 1115,1]
type = ChangeState
trigger1 = Root,command = "a" || Root,command = "b" || Root,command = "c" || Root,command = "x" || Root,command = "y" || Root,command = "z"
trigger2 = roundstate > 1
trigger3 = Root,StateNo = 0 && Time > 60
value = 20050

;------------------------ N
[Statedef 20005]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000
velset = 0,0
ownpal = 1
sprpriority = 7

[State -2, 3]
type = ParentVarSet
trigger1 = 1
var(50) = 10

[State -2, Remove Mode Bar]
type = RemoveExplod
trigger1 = 1
id = 20001
[State -2, Remove Mode Bar]
type = RemoveExplod
trigger1 = 1
id = 20002
[State -2, Remove Mode Bar]
type = RemoveExplod
trigger1 = 1
id = 20003
[State -2, Remove Mode Bar]
type = RemoveExplod
trigger1 = 1
id = 20004
[State -2, Remove Mode Bar]
type = RemoveExplod
trigger1 = 1
id = 20006

[State 810,Explod]
type = Explod
trigger1 = NumExplod(20005)!
anim = 20005
id = 20005
pos = 0,0
scale = .5,.5
postype = P1
sprpriority = 4
bindtime = -1
removetime =999999
ownpal = 1
removeongethit = 1
ontop = 1
facing = 1

[State -2, 3]
type = ParentVarSet
trigger1 = 1
var(30) = 5

[State 30050, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

[State 200, 3]
type = Playsnd
triggerall = time > 8
trigger1 = Root,command = "holdup" || Root,command = "holddown"
value = 10,0
channel = 10

[State 190, 1]
type = ChangeState
triggerall = time > 8
trigger1 = Root,command = "holdup" || Root,command = "holddown"
value = 20004+(Root,command = "holddown")*2

[STate 1115,1]
type = ChangeState
trigger1 = Root,command = "a" || Root,command = "b" || Root,command = "c" || Root,command = "x" || Root,command = "y" || Root,command = "z"
trigger2 = roundstate > 1
trigger3 = Root,StateNo = 0 && Time > 60
value = 20050

;------------------------ K
[Statedef 20006]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000
velset = 0,0
ownpal = 1
sprpriority = 7

[State -2, 3]
type = ParentVarSet
trigger1 = 1
var(50) = 10

[State -2, Remove Mode Bar]
type = RemoveExplod
trigger1 = 1
id = 20001
[State -2, Remove Mode Bar]
type = RemoveExplod
trigger1 = 1
id = 20002
[State -2, Remove Mode Bar]
type = RemoveExplod
trigger1 = 1
id = 20003
[State -2, Remove Mode Bar]
type = RemoveExplod
trigger1 = 1
id = 20005
[State -2, Remove Mode Bar]
type = RemoveExplod
trigger1 = 1
id = 20006

[State 810,Explod]
type = Explod
trigger1 = NumExplod(20006)!
anim = 20006
id = 20006
pos = 0,0
scale = .5,.5
postype = P1
sprpriority = 4
bindtime = -1
removetime =999999
ownpal = 1
removeongethit = 1
ontop = 1
facing = 1

[State -2, 3]
type = ParentVarSet
trigger1 = 1
var(30) = 6

[State 30050, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

[State 200, 3]
type = Playsnd
triggerall = time > 8
trigger1 = Root,command = "holdup" || Root,command = "holddown"
value = 10,0
channel = 10

[State 190, 1]
type = ChangeState
triggerall = time > 8
trigger1 = Root,command = "holdup" || Root,command = "holddown"
value = 20005+(Root,command = "holddown")*-4

[STate 1115,1]
type = ChangeState
trigger1 = Root,command = "a" || Root,command = "b" || Root,command = "c" || Root,command = "x" || Root,command = "y" || Root,command = "z"
trigger2 = roundstate > 1
trigger3 = Root,StateNo = 0 && Time > 60
value = 20050

;------------------------ 消滅
[Statedef 20050]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000

[State 200, 3]
type = Playsnd
trigger1 = Time = 0
value = 10,1
channel = 10

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = 1
id = 20001
[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = 1
id = 20002
[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = 1
id = 20003
[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = 1
id = 20004
[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = 1
id = 20005
[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = 1
id = 20006

[STate 1115,1]
type = DestroySelf
trigger1 = Time = 0

;------------------------ 上矢印
[Statedef 20010]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000
velset = 0,0
ownpal = 1

[State 4110, PalFX]
type = PalFX
trigger1= Time = 0
add = 0,0,0
Time = 1

[State 4110, Varset]
type = Varset
trigger1= NumExplod(20011)!
var(1) = 0

[State 4110, Explod]
type = Explod
trigger1 = NumExplod(20010)!
anim = 20010
id = 20010
scale = .5,.5
pos = 0,0
postype = P1
sprpriority = 5
bindtime = -1
removetime = -1
ownpal = 1
ontop = 1

[State 4110, Explod]
type = Explod
trigger1 = NumExplod(20011)!
trigger1 = Root,command = "holdup"
anim = 20011
id = 20011
scale = .5,.5
pos = 0,0
vel = 0,-.2
postype = P1
sprpriority = 6
bindtime = 1
removetime = 30
ownpal = 0
ontop = 1

[State 4110, Varadd]
type = Varadd
trigger1= NumExplod(20011)
var(1) = -9

[State 4110, PalFX]
type = PalFX
trigger1= NumExplod(20011)
add = Var(1)-1,Var(1)-1,Var(1)-1
Time = 1

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = Root,NumHelper(20000)!
id = 20010
[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = Root,NumHelper(20000)!
id = 20011

[State 4110, DestroySelf]
type = DestroySelf
trigger1 = Root,NumHelper(20000)!

;------------------------ 下矢印
[Statedef 20015]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000
velset = 0,0
ownpal = 1

[State 4110, PalFX]
type = PalFX
trigger1= Time = 0
add = 0,0,0
Time = 1

[State 4110, Varset]
type = Varset
trigger1= NumExplod(20011)!
var(1) = 0

[State 4110, Explod]
type = Explod
trigger1 = NumExplod(20010)!
anim = 20015
id = 20010
scale = .5,.5
pos = 0,0
postype = P1
sprpriority = 5
bindtime = -1
removetime = -1
ownpal = 1
ontop = 1

[State 4110, Explod]
type = Explod
trigger1 = NumExplod(20011)!
trigger1 = Root,command = "holddown"
anim = 20016
id = 20011
scale = .5,.5
pos = 0,0
vel = 0,.2
postype = P1
sprpriority = 6
bindtime = 1
removetime = 30
ownpal = 0
ontop = 1

[State 4110, Varadd]
type = Varadd
trigger1= NumExplod(20011)
var(1) = -9

[State 4110, PalFX]
type = PalFX
trigger1= NumExplod(20011)
add = Var(1)-1,Var(1)-1,Var(1)-1
Time = 1

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = Root,NumHelper(20000)!
id = 20010
[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = Root,NumHelper(20000)!
id = 20011

[State 4110, DestroySelf]
type = DestroySelf
trigger1 = Root,NumHelper(20000)!

;---------------------------------------------------------------------
; 特殊ゲージ（Cグルーヴ）
;------------------------ 
[Statedef 21000]
type    = A
movetype= I
physics = N
anim = 20000
velset = 0,0
ctrl = 0

[State 5900, 1] 
type = ParentVarSet
trigger1 = 1
var(30) = 1

[State -2, Explod(P1)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = 21010
id = 21010
pos = 140,230
postype = Left
bindtime = -1
removetime = -1
ontop = 1
ownpal = 1
facing = 1
persistent = 0
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P2)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = 21015
id = 21010
pos = -140,230
postype = Right
bindtime = -1
removetime = -1
ontop = 1
ownpal = 1
facing = 1
persistent = 0
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

;------------------------ Lv.1
[State -2, Explod(P1-Lv.1)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = 21020
id = 21020
pos = 140,227
scale = 1,5
postype = Left
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
persistent = 0
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P2)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = 21025
id = 21020
pos = -140,227
scale = 1,5
postype = Right
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
persistent = 0
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State 4900, 16]
type = modifyExplod
trigger1 = Root,fvar(7) >=1000
Id = 21020
scale = 0,5

[State 4900, 16]
type = modifyExplod
trigger1 = Root,fvar(7) <1000
Id = 21020
scale = ((Root,fvar(7))/1000.0),5

[State -2, Explod(P1-Lv.1)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = 21030
id = 21030
pos = 140,227
scale = 1,5
postype = Left
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
persistent = 0
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P1-Lv.1)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = 21035
id = 21030
pos = -140,227
scale = 1,5
postype = Right
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
persistent = 0
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State 4900, 16]
type = modifyExplod
trigger1 = Root,fvar(7) <1000
Id = 21030
scale = 0,5

[State 4900, 16]
type = modifyExplod
trigger1 = Root,fvar(7) >=1000
Id = 21030
scale = 1.025,5

;------------------------ Lv.2
[State -2, Explod(P1-Lv.2)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = 21020
id = 21021
pos = 98,225
scale = 1,7
postype = Left
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
persistent = 0
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P2-Lv.2)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = 21025
id = 21021
pos = -98,225
scale = 1,7
postype = Right
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
persistent = 0
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State 4900, 16]
type = modifyExplod
trigger1 = Root,fvar(7) >=2000
trigger2 = Root,fvar(7) <1000
Id = 21021
scale = 0,7

[State 4900, 16]
type = modifyExplod
trigger1 = Root,fvar(7) >=1000
trigger1 = Root,fvar(7) <2000
Id = 21021
scale = (((Root,fvar(7))-1000)/1000.0),7

[State -2, Explod(P1-Lv.1)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = 21030
id = 21031
pos = 97,225
scale = 1,7
postype = Left
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
persistent = 0
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P1-Lv.1)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = 21035
id = 21031
pos = -97,225
scale = 1,7
postype = Right
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
persistent = 0
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State 4900, 16]
type = modifyExplod
trigger1 = Root,fvar(7) <2000
Id = 21031
scale = 0,7

[State 4900, 16]
type = modifyExplod
trigger1 = Root,fvar(7) >=2000
Id = 21031
scale = 1.025,7

;------------------------ Lv.3
[State -2, Explod(P1-Lv.3)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = 21020
id = 21022
pos = 54,223
scale = 1,8
postype = Left
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
persistent = 0
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P2-Lv.3)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = 21025
id = 21022
pos = -54,223
scale = 1,8
postype = Right
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
persistent = 0
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State 4900, 16]
type = modifyExplod
trigger1 = Root,fvar(7) >=3000
trigger2 = Root,fvar(7) <2000
Id = 21022
scale = 0,8

[State 4900, 16]
type = modifyExplod
trigger1 = Root,fvar(7) >=2000
trigger1 = Root,fvar(7) <3000
Id = 21022
scale = (((Root,fvar(7))-2000)/1000.0),8

[State -2, Explod(P1-Lv.3)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = 21030
id = 21032
pos = 54,223
scale = 1,8
postype = Left
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
persistent = 0
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P1-Lv.3)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = 21035
id = 21032
pos = -54,223
scale = 1,8
postype = Right
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
persistent = 0
pausemovetime = -1
Supermovetime = -1

[State 4900, 16]
type = modifyExplod
trigger1 = Root,fvar(7) <3000
Id = 21032
scale = 0,8

[State 4900, 16]
type = modifyExplod
trigger1 = Root,fvar(7) >=3000
Id = 21032
scale = 1.025,8

;------------------------ 枠
[State -2, Explod(P1)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = 21000
id = 21000
pos = 140,230
postype = Left
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 1
facing = 1
persistent = 0
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P2)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = 21005
id = 21000
pos = -140,230
postype = Right
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 1
facing = 1
pausemovetime = -1
Supermovetime = -1

;------------------------ レベル表記
[State -2, Explod(P1-Lv.1)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = 21041
id = 21041
pos = 31,223
postype = Left
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 1
facing = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P1-Lv.1)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = 21051
id = 21041
pos = -31,223
postype = Right
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 1
facing = 1
pausemovetime = -1
Supermovetime = -1

[State 4900, 16]
type = modifyExplod
trigger1 = power = [1000,2000)
Id = 21041
scale = .5,.5

[State 4900, 16]
type = modifyExplod
trigger1 = power != [1000,2000)
id = 21041
scale = 0,0

[State -2, Explod(P1-Lv.1)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = 21042
id = 21042
pos = 31,223
postype = Left
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 1
facing = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P1-Lv.1)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = 21052
id = 21042
pos = -31,223
postype = Right
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 1
facing = 1
pausemovetime = -1
Supermovetime = -1

[State 4900, 16]
type = modifyExplod
trigger1 = power = [2000,3000)
Id = 21042
scale = .5,.5
[State 4900, 16]
type = modifyExplod
trigger1 = power != [2000,3000)
id = 21042
scale = 0,0

[State -2, Explod(P1-Lv.1)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = 21043
id = 21043
pos = 31,223
postype = Left
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 1
facing = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P1-Lv.1)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = 21053
id = 21043
pos = -31,223
postype = Right
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 1
facing = 1
pausemovetime = -1
Supermovetime = -1

[State 4900, 16]
type = modifyExplod
trigger1 = power >= 3000
Id = 21043
scale = .5,.5
[State 4900, 16]
type = modifyExplod
trigger1 = power < 3000
id = 21043
scale = 0,0

;------------------------ 音
[State -3, Burst]
type = VarSet
trigger1 = 1
var(1) = floor(power/1000)

[State -3,Super]
type = Helper
trigger1 = Var(1) != Var(2)
trigger1 = Var(1) > Var(2)
id = 29000
pos = 0,0
postype = P1
stateno = 29000

[State -3, Burst]
type = VarSet
trigger1 = 1
var(2) = floor(power/1000)

;------------------------ 消去
[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = roundstate = 0
id = 21000
ignorehitpause = 1

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = roundstate = 0
id = 21010
ignorehitpause = 1

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = roundstate = 0
id = 21020
ignorehitpause = 1

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = roundstate = 0
id = 21021
ignorehitpause = 1

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = roundstate = 0
id = 21022
ignorehitpause = 1

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = roundstate = 0
id = 21030
ignorehitpause = 1

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = roundstate = 0
id = 21031
ignorehitpause = 1

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = roundstate = 0
id = 21032
ignorehitpause = 1

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = roundstate = 0
id = 21041
ignorehitpause = 1

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = roundstate = 0
id = 21042
ignorehitpause = 1

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = roundstate = 0
id = 21043
ignorehitpause = 1

[State 1150, ChangeState]
type = DestroySelf
trigger1 = roundstate = 0

;---------------------------------------------------------------------
; 特殊ゲージ（Aグルーヴ）
;------------------------ 
[Statedef 22000]
type    = A
movetype= I
physics = N
anim = 20000
velset = 0,0
ctrl = 0

[State 5900, 1] 
type = ParentVarSet
trigger1 = 1
var(30) = 2

[State -2, 1]
type = PalFX
trigger1 = time = 0
time = 1
add = 0,0,0
ignorehitpause = 1

[State -2, Explod(P1)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = 22010
id = 22010
pos = 140,230
postype = Left
bindtime = -1
removetime = -1
ontop = 1
ownpal = 1
facing = 1
persistent = 0
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P2)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = 22015
id = 22010
pos = -140,230
postype = Right
bindtime = -1
removetime = -1
ontop = 1
ownpal = 1
facing = 1
persistent = 0
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P1)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = 22020
id = 22020
pos = 140,230
scale = .5,.5
postype = Left
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
persistent = 0
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P1)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = 22021
id = 22021
pos = 140,230
scale = .5,.5
postype = Left
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
persistent = 0
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P1)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = 22022
id = 22022
pos = 77,227
postype = Left
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
persistent = 0
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P2)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = 22025
id = 22020
pos = -140,230
scale = .5,.5
postype = Right
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
persistent = 0
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P1)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = 22026
id = 22021
pos = -140,230
scale = .5,.5
postype = Right
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
persistent = 0
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P1)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = 22027
id = 22022
pos = -77,227
postype = Right
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
persistent = 0
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P1)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = 22000
id = 22000
pos = 140,230
postype = Left
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 1
facing = 1
persistent = 0
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P2)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = 22005
id = 22000
pos = -140,230
postype = Right
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 1
facing = 1
persistent = 0
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P1)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = 22030
id = 22030
pos = 31,228
postype = Left
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 1
facing = 1
persistent = 0
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P2)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = 22030
id = 22030
pos = -31,228
postype = Right
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 1
facing = 1
persistent = 0
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State 4900, 16]
type = modifyExplod
trigger1 = Root,fvar(7) <3000
Id = 22030
scale = 0,0
ignorehitpause = 1

[State 4900, 16]
type = modifyExplod
trigger1 = Root,fvar(7) >=3000
Id = 22030
scale = .5,.5
ignorehitpause = 1

[State 4900, 16]
type = modifyExplod
trigger1 = Numexplod(22020)
trigger1 = Root,fvar(7) <=1500
Id = 22020
scale = ((Root,fvar(7))/3000.0),.5
ignorehitpause = 1

[State 4900, 16]
type = modifyExplod
trigger1 = Numexplod(22021)
trigger1 = Root,fvar(7) <= 95
Id = 22021
scale = 0,.5
ignorehitpause = 1

[State 4900, 16]
type = modifyExplod
trigger1 = Numexplod(22020)
trigger1 = Root,fvar(7) >1500
Id = 22020
scale = .5,.5
ignorehitpause = 1

[State 4900, 16]
type = modifyExplod
trigger1 = Numexplod(22021)
trigger1 = Root,fvar(7) > 95
trigger1 = Root,fvar(7) <=1500
Id = 22021
scale = ((Root,fvar(7))/3000.0),.5
ignorehitpause = 1

[State 4900, 16]
type = modifyExplod
trigger1 = Numexplod(22021)
trigger1 = Root,fvar(7) >1500
Id = 22021
scale = .5,.5
ignorehitpause = 1

[State 4900, 16]
type = modifyExplod
trigger1 = Numexplod(22022)
trigger1 = Root,fvar(7) <=1500
Id = 22022
scale = 0,1
ignorehitpause = 1

[State 4900, 16]
type = modifyExplod
trigger1 = Numexplod(22022)
trigger1 = Root,fvar(7) >1500
Id = 22022
scale = (((Root,fvar(7))-1500)/1500.0),1
ignorehitpause = 1

[State 10000, Varadd(F3)]
type = ParentVaradd
trigger1 = Root,fvar(8)
fvar(7)= -7

[State 1000, 0]
type = PowerAdd
trigger1 = Root,fvar(8) && Root,MoveType = H
trigger1 = Root,fvar(7) >1500
value = 1500

[State 4100,Varadd]
type = ParentVarSet
triggerall = Root,StateNo != [3000,3999]
trigger1 = Root,fvar(8) && Root,MoveType = H
trigger2 = Root,fvar(7) <=0
var(43) = 1

[State 4100,Varadd]
type = ParentVarSet
trigger1 = Root,fvar(8) && Root,MoveType = H
trigger2 = Root,fvar(7) <=0
fvar(8) = 0

[State 4100,Varadd]
type = ParentVarSet
trigger1 = Root,fvar(8) && Root,MoveType = H
trigger1 = Root,fvar(7) <=0
fvar(7) = 0

[State -3, Burst]
type = VarSet
trigger1 = Root,fvar(8)
var(1) = 0

[State -3, Burst]
type = VarSet
trigger1 = Root,fvar(8)
var(2) = 0

[State -3, Burst]
type = VarSet
trigger1 = Root,fvar(8)!
var(1) = floor((Root,fvar(7))/1500)

[State -3,Super]
type = Helper
trigger1 = Var(1) != Var(2)
trigger1 = Var(1) > Var(2)
id = 29000
pos = 0,0
postype = P1
stateno = 29000

[State -3, Burst]
type = VarSet
trigger1 = Root,fvar(8)!
var(2) = floor((Root,fvar(7))/1500)

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = roundstate = 0
id = 22000
ignorehitpause = 1

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = roundstate = 0
id = 22010
ignorehitpause = 1

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = roundstate = 0
id = 22020
ignorehitpause = 1

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = roundstate = 0
id = 22021
ignorehitpause = 1

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = roundstate = 0
id = 22022
ignorehitpause = 1

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = roundstate = 0
id = 22030
ignorehitpause = 1

[State -2, 1]
type = PalFX
triggerall = (GameTime%3)=0
trigger1 = Root,fvar(7) >=3000
time = 1
add = 256,256,256
ignorehitpause = 1

[State 1150, ChangeState]
type = DestroySelf
trigger1 = roundstate = 0

;---------------------------------------------------------------------
; 特殊ゲージ（Pグルーヴ）
;------------------------ 
[Statedef 23000]
type    = A
movetype= I
physics = N
anim = 20000
velset = 0,0
ctrl = 0

[State 5900, 1] 
type = ParentVarSet
trigger1 = 1
var(30) = 3

[State -2, Explod(P1)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = 23010
id = 23010
pos = 140,230
postype = Left
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
persistent = 0
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P2)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = 23015
id = 23010
pos = -140,230
postype = Right
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
persistent = 0
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P1)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = 23020
id = 23020
pos = 140,230
postype = Left
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
persistent = 0
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P2)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = 23025
id = 23020
pos = -140,230
postype = Right
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
persistent = 0
pausemovetime = -1
Supermovetime = -1

[State 4900, 16]
type = modifyExplod
trigger1 = Numexplod(23020)
Id = 23020
scale = (Power/3000.0),1

[State -2, Explod(P1)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = 23021
id = 23021
pos = 57,230
postype = Left
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
persistent = 0
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P2)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = 23026
id = 23021
pos = -57,230
postype = Right
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
persistent = 0
pausemovetime = -1
Supermovetime = -1

[State 4900, 16]
type = modifyExplod
trigger1 = Power < 2004
Id = 23021
scale = 0,0

[State 4900, 16]
type = modifyExplod
trigger1 = Power >= 1980
Id = 23021
scale = ((Power-1980)/1020.0),1

[State -2, Explod(P1)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = 23022
id = 23022
pos = 33,230
postype = Left
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
persistent = 0
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P2)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = 23027
id = 23022
pos = -33,230
postype = Right
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
persistent = 0
pausemovetime = -1
Supermovetime = -1

[State 4900, 16]
type = modifyExplod
trigger1 = Power >= 2548
Id = 23022
scale = ((Power-2548)/452.0),1

[State 4900, 16]
type = modifyExplod
trigger1 = Power < 2548
Id = 23022
scale = 0,0

[State -2, Explod(P1)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = 23030
id = 23030
pos = 140,230
postype = Left
scale = 1,1
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P2)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = 23035
id = 23030
pos = -140,230
postype = Right
scale = 1,1
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
pausemovetime = -1
Supermovetime = -1

[State 4900, 16]
type = modifyExplod
trigger1 = Power >= 3000
Id = 23030
scale = 1,1

[State 4900, 16]
type = modifyExplod
trigger1 = Power < 3000
Id = 23030
scale = 0,0

[State -2, Explod(P1)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = 23000
id = 23000
pos = 140,230
postype = Left
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P2)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = 23005
id = 23000
pos = -140,230
postype = Right
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P1)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = 23040
id = 23040
pos = 34,223
postype = Left
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P2)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = 23040
id = 23040
pos = -34,223
postype = Right
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
pausemovetime = -1
Supermovetime = -1

[State 4900, 16]
type = modifyExplod
trigger1 = Power >= 3000
Id = 23040
scale = .5,.5

[State 4900, 16]
type = modifyExplod
trigger1 = Power < 3000
Id = 23040
scale = 0,0

[State -3, Burst]
type = VarSet
trigger1 = 1
var(1) = floor(power/3000)

[State -3,Super]
type = Helper
trigger1 = Var(1) != Var(2)
trigger1 = Var(1) > Var(2)
id = 29000
pos = 0,0
postype = P1
stateno = 29000

[State -3, Burst]
type = VarSet
trigger1 = 1
var(2) = floor(power/3000)

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = roundstate = 0
id = 23000

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = roundstate = 0
id = 23010

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = roundstate = 0
id = 23020

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = roundstate = 0
id = 23022

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = roundstate = 0
id = 23030

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = roundstate = 0
id = 23040

[State 1150, ChangeState]
type = DestroySelf
trigger1 = roundstate = 0

;---------------------------------------------------------------------
; 特殊ゲージ（Sグルーヴ）
;------------------------ 
[Statedef 24000]
type    = A
movetype= I
physics = N
anim = 20000
velset = 0,0
ctrl = 0
ownpal = 1

[State -2, 1]
type = PalFX
trigger1 = time = 0
time = 1
add = 0,0,0
ignorehitpause = 1

[State -2, 1]
type = PalFX
trigger1 = (100*parent,life/parent,const(data.life))<=30
trigger1 = (GameTime%3)=0
time = 1
add = 144,144,144
ignorehitpause = 1

[State 5900, 1] 
type = ParentVarSet
trigger1 = 1
var(30) = 4

[State -2, Explod(P1)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = 24010
id = 24010
pos = 140,230
postype = Left
bindtime = -1
removetime = -1
ontop = 1
ownpal = 1
facing = 1
persistent = 0
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P2)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = 24015
id = 24010
pos = -140,230
postype = Right
bindtime = -1
removetime = -1
ontop = 1
ownpal = 1
facing = 1
persistent = 0
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P1)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = 24020
id = 24020
pos = 140,230
postype = Left
bindtime = -1
removetime = -1
ontop = 1
ownpal = 1
facing = 1
persistent = 0
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P2)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = 24025
id = 24020
pos = -140,230
postype = Right
bindtime = -1
removetime = -1
ontop = 1
ownpal = 1
facing = 1
persistent = 0
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State 4900, 16]
type = modifyExplod
trigger1 = Numexplod(24020)
Id = 24020
scale = ((Root,fvar(7)))/100.0,1
ignorehitpause = 1

[State -2, Explod(P1)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = 24000
id = 24000
pos = 140,230
postype = Left
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P2)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = 24005
id = 24000
pos = -140,230
postype = Right
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P1)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = 24030
id = 24030
pos = 30,220
postype = Left
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P2)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = 24030
id = 24030
pos = -30,220
postype = Right
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State 4900, 16]
type = modifyExplod
trigger1 = Root,fvar(8)
Id = 24030
scale = .5,.5

[State 4900, 16]
type = modifyExplod
trigger1 = Root,fvar(8)!
Id = 24030
scale = 0,0

[State 4100,Varadd]
type = ParentVarSet
trigger1 = (Root,fvar(7) >=100) && fvar(8)!
fvar(7) = 100

[State 4100,Varadd]
type = ParentVarSet
trigger1 = Root,fvar(7) =100
fvar(8) = 1

[State 200,PlaySnd]
type = PlaySnd
trigger1 = Root,fvar(7) = 100
trigger1 = Root,fvar(8) = 1
value = 20,4

[State 10000, Varadd(F3)]
type = ParentVaradd
trigger1 = Root,fvar(8) = 1
fvar(7)= -.136425

[State 4100,Varadd]
type = ParentVarSet
trigger1 = Root,fvar(7) <=0
fvar(8) = 0

[State 4100,Varadd]
type = ParentVarSet
trigger1 = Root,fvar(7) <=0
fvar(7) = 0

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = roundstate = 0
id = 24000
ignorehitpause = 1

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = roundstate = 0
id = 24010
ignorehitpause = 1

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = roundstate = 0
id = 24020
ignorehitpause = 1

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = roundstate = 0
id = 24030
ignorehitpause = 1

[State 1150, ChangeState]
type = DestroySelf
trigger1 = roundstate = 0

;---------------------------------------------------------------------
; 特殊ゲージ（Nグルーヴ）
;------------------------ 
[Statedef 25000]
type    = A
movetype= I
physics = N
anim = 20000
velset = 0,0
ctrl = 0
ownpal = 1

[State 5900, 1] 
type = ParentVarSet
trigger1 = 1
var(30) = 5

[State -2, Explod(P1)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = 25010
id = 25010
pos = 114,230
postype = Left
bindtime = -1
removetime = -1
ontop = 1
ownpal = 1
facing = 1
persistent = 0
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P2)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = 25015
id = 25010
pos = -114,230
postype = Right
bindtime = -1
removetime = -1
ontop = 1
ownpal = 1
facing = 1
persistent = 0
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P1)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = 25020
id = 25020
pos = 114,230
postype = Left
bindtime = -1
removetime = -1
ontop = 1
ownpal = 1
facing = 1
persistent = 0
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P2)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = 25025
id = 25020
pos = -114,230
postype = Right
bindtime = -1
removetime = -1
ontop = 1
ownpal = 1
facing = 1
persistent = 0
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State 4900, 16]
type = modifyExplod
trigger1 = Numexplod(25020)
Id = 25020
scale = ((Root,fvar(7)))/72.0,1
ignorehitpause = 1

[State -2, Explod(P1)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = 25000
id = 25000
pos = 114,230
postype = Left
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 1
facing = 1
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P2)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = 25005
id = 25000
pos = -114,230
postype = Right
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 1
facing = 1
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P1)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = 25040
id = 25005
pos = 30,221
postype = Left
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 1
facing = 1
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P2)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = 25040
id = 25005
pos = -30,221
postype = Right
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 1
facing = 1
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State 4900, 16]
type = modifyExplod
trigger1 = Power >= 3000
Id = 25005
scale = .5,.5

[State 4900, 16]
type = modifyExplod
trigger1 = Power < 3000
Id = 25005
scale = 0,0

[State -2, Explod(P2)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = 25030
id = 25030
pos = 138,228
postype = Left
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P2)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = 25030
id = 25030
pos = -138,228
postype = Right
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State 4900, 16]
type = modifyExplod
trigger1 = Power >= 1000
Id = 25030
scale = .5,.5

[State 4900, 16]
type = modifyExplod
trigger1 = Power < 1000
Id = 25030
scale = 0,0

[State -2, Explod(P2)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = 25030
id = 25031
pos = 130,228
postype = Left
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P2)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = 25030
id = 25031
pos = -130,228
postype = Right
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State 4900, 16]
type = modifyExplod
trigger1 = Power >= 2000
Id = 25031
scale = .5,.5

[State 4900, 16]
type = modifyExplod
trigger1 = Power < 2000
Id = 25031
scale = 0,0

[State -2, Explod(P2)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = 25030
id = 25032
pos = 122,228
postype = Left
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P2)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = 25030
id = 25032
pos = -122,228
postype = Right
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State 4900, 16]
type = modifyExplod
trigger1 = Power >= 3000
Id = 25032
scale = .5,.5

[State 4900, 16]
type = modifyExplod
trigger1 = Power < 3000
Id = 25032
scale = 0,0

[State -2, Explod(P2)]
type = Explod
triggerall = Var(3) = 3 && teamside = 1
triggerall = NumExplod(25035)!
trigger1 = Var(4)
anim = 25035
id = 25035
pos = 138,228
postype = Left
scale = .5,.5
bindtime = -1
ontop = 1
ownpal = 1
facing = 1
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P2)]
type = Explod
triggerall = Var(3) = 3 && teamside = 1
triggerall = NumExplod(25036)!
trigger1 = Var(4)
anim = 25035
id = 25036
pos = 130,228
postype = Left
scale = .5,.5
bindtime = -1
ontop = 1
ownpal = 1
facing = 1
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P2)]
type = Explod
triggerall = Var(3) = 3 && teamside = 1
triggerall = NumExplod(25037)!
trigger1 = Var(4)
anim = 25035
id = 25037
pos = 122,228
postype = Left
scale = .5,.5
bindtime = -1
ontop = 1
ownpal = 1
facing = 1
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P2)]
type = Explod
triggerall = Var(3) = 3 && teamside = 2
triggerall = NumExplod(25035)!
trigger1 = Var(4)
anim = 25035
id = 25035
pos = -138,228
postype = Right
scale = .5,.5
bindtime = -1
ontop = 1
ownpal = 1
facing = 1
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P2)]
type = Explod
triggerall = Var(3) = 3 && teamside = 2
triggerall = NumExplod(25036)!
trigger1 = Var(4)
anim = 25035
id = 25036
pos = -130,228
postype = Right
scale = .5,.5
bindtime = -1
ontop = 1
ownpal = 1
facing = 1
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P2)]
type = Explod
triggerall = Var(3) = 3 && teamside = 2
triggerall = NumExplod(25037)!
trigger1 = Var(4)
anim = 25035
id = 25037
pos = -122,228
postype = Right
scale = .5,.5
bindtime = -1
ontop = 1
ownpal = 1
facing = 1
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = Power < 1000
id = 25035

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = Power < 2000
id = 25036

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = Power < 3000
id = 25037

[State 1000, 0]
type = PalFX
trigger1 = 1
Time = 1
add = 0-var(3)*12,0-var(3)*4,0

[State 4100,Varadd]
type = VarSet
trigger1 = Var(3) <= 0
var(4) = 0

[State 4100,Varadd]
type = VarAdd
triggerall = Var(3) < 19
trigger1 = Var(4)!
var(3) = 1

[State 4100,Varadd]
type = VarSet
trigger1 = Var(3) >= 19
var(4) = 1

[State 4100,Varadd]
type = VarAdd
triggerall = Var(3) > 0
trigger1 = Var(4)
var(3) = -1

[State 4100,Varadd]
type = ParentVarSet
trigger1 = Power < 3000
fvar(7) = (Power-(Ceil(Power/1000)*1000))*.072

[State -3,Varadd]
type = ParentVarSet
trigger1 = Power >= 3000
fvar(7) = 72

[State -3, Burst]
type = VarSet
trigger1 = 1
var(1) = floor(power/1000)

[State -3,Super]
type = Helper
trigger1 = Var(1) != Var(2)
trigger1 = Var(1) > Var(2)
id = 29001
pos = 0,0
postype = P1
stateno = 29000

[State -3, Burst]
type = VarSet
trigger1 = 1
var(2) = floor(power/1000)

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = roundstate = 0
id = 25000

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = roundstate = 0
id = 25010

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = roundstate = 0
id = 25020

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = roundstate = 0
id = 25005

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = roundstate = 0
id = 25030

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = roundstate = 0
id = 25031

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = roundstate = 0
id = 25032

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = roundstate = 0
id = 25035

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = roundstate = 0
id = 25036

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = roundstate = 0
id = 25037

[State 1150, ChangeState]
type = DestroySelf
trigger1 = roundstate = 0

;------------------------ パワーMAX
[Statedef 25050]
type    = A
movetype= I
physics = N
anim = 20000
velset = 0,0
ctrl = 0

[State 4100,Varadd]
type = VarSet
trigger1 = Time = 0
var(1) = 662

[State 4100,Varadd]
type = ParentVarSet
trigger1 = Time = 0
fvar(8) = 1

[State -2, Explod(P1)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = 25060
id = 25060
pos = 142,214
postype = Left
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
persistent = 0
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P1)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = 25061
id = 25060
pos = 142,214
postype = Left
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
persistent = 0
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P2)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = 25065
id = 25060
pos = -142,214
postype = Right
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
persistent = 0
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P2)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = 25066
id = 25060
pos = -142,214
postype = Right
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
persistent = 0
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P1)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = 25070
id = 25070
pos = 142,214
postype = Left
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
persistent = 0
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P2)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = 25075
id = 25070
pos = -142,214
postype = Right
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
persistent = 0
pausemovetime = -1
Supermovetime = -1

[State 4900, 16]
type = modifyExplod
trigger1 = Numexplod(25070)
Id = 25070
scale = (var(1)/662.0),1

[State -2, Explod(P1)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = 25050
id = 25050
pos = 142,214
postype = Left
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P2)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = 25055
id = 25050
pos = -142,214
postype = Right
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
pausemovetime = -1
Supermovetime = -1

[State 4100,Varadd]
type = VarAdd
trigger1 = var(1) > 0
var(1) = -1

[State 4100,Varadd]
type = ParentVarSet
trigger1 = var(1) <= 0
trigger2 = roundstate = 0
fvar(8) = 0

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = Root,fvar(8)!
trigger2 = roundstate = 0
id = 25050

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = Root,fvar(8)!
trigger2 = roundstate = 0
id = 25060

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = Root,fvar(8)!
trigger2 = roundstate = 0
id = 25070

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = Root,fvar(8)!
trigger2 = roundstate = 0
id = 25071

[State 1150, ChangeState]
type = DestroySelf
trigger1 = Root,fvar(8)!
trigger2 = roundstate = 0

;---------------------------------------------------------------------
; 特殊ゲージ（Kグルーヴ）
;------------------------ 
[Statedef 26000]
type    = A
movetype= I
physics = N
anim = 20000
velset = 0,0
ctrl = 0

[State 5900, 1] 
type = ParentVarSet
trigger1 = 1
var(30) = 6

[State 4100,Varadd]
type = varset
trigger1 = Root,teamside = 1
var(10) = Ceil(Root,Pos X-Pos X)
[State 4100,Varadd]
type = varset
trigger1 = Root,teamside = 2
var(10) = Ceil(Pos X-Root,Pos X)

[State 4100,Varadd]
type = varset
trigger1 = 1
var(11) = Ceil(Root,Pos Y-Pos Y)

[State -2, Explod(P1)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = 26010
id = 26010
pos = 140,230
postype = Left
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
persistent = 0
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P2)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = 26015
id = 26010
pos = -140,230
postype = Right
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
persistent = 0
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P1)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = 26020
id = 26020
pos = 140,230
postype = Left
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
persistent = 0
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P2)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = 26025
id = 26020
pos = -140,230
postype = Right
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
persistent = 0
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State 4900, 16]
type = modifyExplod
trigger1 = Numexplod(26020)
Id = 26020
scale = ((Root,fvar(7)))/72.0,1
ignorehitpause = 1

[State -2, Explod(P1)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = 26000
id = 26000
pos = 140,230
postype = Left
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P2)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = 26005
id = 26000
pos = -140,230
postype = Right
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P1)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = 26030
id = 26030
pos = 22,225
postype = Left
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P2)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = 26030
id = 26030
pos = -22,225
postype = Right
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State 4900, 16]
type = modifyExplod
trigger1 = Root,fvar(8)
Id = 26030
scale = fvar(1),fvar(1)

[State 4900, 16]
type = modifyExplod
trigger1 = Root,fvar(8)!
Id = 26030
scale = 0,0

[State 4100,Varadd]
type = VarSet
trigger1 = Time = 0
fvar(1) = .5

[State 4100,Varadd]
type = Varadd
trigger1 = var(1)!
trigger1 = fvar(1) < .5
fvar(1) = .002

[State 4100,Varadd]
type = VarSet
trigger1 = fvar(1) >= .5
var(1) = 1

[State 4100,Varadd]
type = Varadd
trigger1 = var(1)
trigger1 = fvar(1) > .4
fvar(1) = -.0015

[State 4100,Varadd]
type = VarSet
trigger1 = fvar(1) <= .4
var(1) = 0

[State -2, Explod(P1)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = 26035
id = 26035
pos = 22,225
postype = Left
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P2)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = 26035
id = 26035
pos = -22,225
postype = Right
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State 4900, 16]
type = modifyExplod
trigger1 = Root,fvar(8)
Id = 26035
scale = .5,.5

[State 4900, 16]
type = modifyExplod
trigger1 = Root,fvar(8)!
Id = 26035
scale = 0,0

[State 4100,Varadd]
type = ParentVarSet
trigger1 = Root,fvar(7) >=72 && Root,fvar(8)!
fvar(7) = 72

[State 4100,Varadd]
type = ParentVarSet
trigger1 = Root,fvar(7) =72
fvar(8) = 1

[State 200,PlaySnd]
type = PlaySnd
trigger1 = Root,fvar(7) = 72
trigger1 = Root,fvar(8) = 1
trigger1 = RoundState = 2
value = 20,4

[State -2, Explod(P2)]
type = Explod
trigger1 = Root,fvar(7) = 72
trigger1 = Root,fvar(8) = 1
trigger1 = RoundState = 2
anim = 2300
pos = var(10),var(11)-60
postype = P1
sprpriority = 3
scale = .5,.5
bindtime = 1
ownpal = 0
ignorehitpause = 1
supermovetime = 9999999999999999
pausemovetime = 9999999999999999

[State 10000, Varadd(F3)]
type = ParentVaradd
trigger1 = Root,fvar(8) = 1
fvar(7)= -.09058

[State 4100,Varadd]
type = ParentVarSet
trigger1 = Root,fvar(7) <=0
fvar(8) = 0

[State 4100,Varadd]
type = ParentVarSet
trigger1 = Root,fvar(7) <=0
fvar(7) = 0

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = roundstate = 0
id = 26000
ignorehitpause = 1

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = roundstate = 0
id = 26010
ignorehitpause = 1

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = roundstate = 0
id = 26020
ignorehitpause = 1

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = roundstate = 0
id = 26030
ignorehitpause = 1

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = roundstate = 0
id = 26035
ignorehitpause = 1

[State 1150, ChangeState]
type = DestroySelf
trigger1 = roundstate = 0

;---------------------------------------------------------------------------
; 音
;------------------------ 
[Statedef 29000]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000
velset = 0,0
ownpal = 1

[State 200,PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 20,5+(IsHelper(19001))*2
persistent = 0

[State 7602,DestroySelf]
type = DestroySelf
trigger1= Time = 0

;---------------------------------------------------------------------------
; KOフィニッシュ処理（SNK）
;------------------------ 
[Statedef 2800]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000
velset = 0,0
ownpal = 1

[State 10000, Varset(1)]
type = VarSet
trigger1 = Time = 0
var(1)= 0

[State 1000,***]
type = AssertSpecial
trigger1 = 1
flag = noshadow
flag2 = invisible

[State 1000,***]
type = AssertSpecial
trigger1 = time = [0,50]
flag = noFG

[State 3000,EnvColor]
type = EnvColor
trigger1 = time = [0,20]
trigger2 = time = [25,50]
value = var(1),var(1),var(1)
time = 1
under = 1
ignorehitpause = 1

[State 3000,EnvColor]
type = EnvColor
trigger1 = time = [20,25]
value = 0,0,0
time = 1
under = 1
ignorehitpause = 1

[State 3000,BGPalfx]
type = BGPalfx
trigger1 = Time > 50
trigger1 = var(1)> 0
add = var(1),var(1),var(1)
time = 1

[State 10000, Varadd(1)]
type = Varadd
trigger1 = Time <= 30
var(1)= 6

[State 10000, Varadd(1)]
type = Varadd
trigger1 = Time > 30
trigger1 = var(1)> 0
var(1)= -4

[State 180, 2]
type = PlaySnd
trigger1 = Time = 0
value = 20,10
persistent = 0

[State 10010,DestroySelf]
type = DestroySelf
trigger1 = RoundState = 4

;---------------------------------------------------------------------------
[Statedef -2]
;---------------------------------------------------------------------------

;---------------------------------------------------------------------
; 特殊エフェクト消去
[State -2,AfterImageTime]
type = AfterImageTime
triggerall = (Var(30) != 2 && fvar(8)!) || (Var(30) = 2 && fvar(8)!)
trigger1 = MoveType = H && StateNo !=5110
trigger2 = Var(30) = 1 && (StateNo =[1000,2999]) && (PrevStateNo =[3000,3999])
trigger3 = PrevStateNo = 4520 && StateNo = 106
trigger4 = PrevStateNo = 50 && (StateNo =[600,699]) 
time = 0

[State -2,AfterImageTime]
type = AfterImageTime
triggerall = Var(30) = 2
trigger1 = var(43) 
time = 0

[State -2,VarSet]
type = VarSet
trigger1 = var(43)
var(43) = 0

;---------------------------------------------------------------------
; メッセージアイコン
[State -2,2]
type = VarSet
triggerall = var(30)
trigger1 = !NumHelper(2600)
var(45) = 0
ignorehitpause = 1

[State -2,2]
type = VarSet
triggerall = var(30)
trigger1 = NumHelper(2600) && !NumHelper(2601) && !NumHelper(2602)
var(45) = 1
ignorehitpause = 1

[State -2,2]
type = VarSet
triggerall = var(30)
trigger1 = NumHelper(2600) && NumHelper(2601) && !NumHelper(2602)
var(45) = 2
ignorehitpause = 1

[State -2,2]
type = VarSet
triggerall = var(30)
trigger1 = NumHelper(2600) && NumHelper(2601) && NumHelper(2602) && !NumHelper(2603)
var(45) = 3
ignorehitpause = 1

[State -3, TECH BOUNS]
type = helper
triggerall = var(30) && var(39)
trigger1 = var(45)<3
trigger1 = Time = 1
trigger1 = TeamMode != turns || TeamMode != single
trigger1 = StateNo = 5201 || anim = 5940
id = 2600+var(45)
name = "TECH BOUNS"
pos = 0,0
postype = P1
stateno = 2602
helpertype = normal
keyctrl = 0
ownpal = 1
supermovetime = 9999999999999999
pausemovetime = 9999999999999999

[State -3, GUARD CANCEL]
type = helper
triggerall = var(30) && var(39)
trigger1 = var(45)<3
trigger1 = MoveType != H && Time = 1
trigger1 = TeamMode != turns || TeamMode != single
trigger1 = StateNo = 4510 || StateNo = 4520 || StateNo = 4500
id = 2600+var(45)
name = "GUARD CANCEL"
pos = 0,0
postype = P1
stateno = 2603
helpertype = normal
keyctrl = 0
ownpal = 1
supermovetime = 9999999999999999
pausemovetime = 9999999999999999

[State -3, BLOCKING]
type = helper
triggerall = var(30) && var(39)
trigger1 = var(45)<3
trigger1 = Time = 1
trigger1 = TeamMode != turns || TeamMode != single
trigger1 = StateNo = 4400 || StateNo = 4402 || StateNo = 4402
id = 2600+var(45)
name = "JUST DEFENDED"
pos = 0,0
postype = P1
stateno = 2604
helpertype = normal
keyctrl = 0
ownpal = 1
supermovetime = 9999999999999999
pausemovetime = 9999999999999999

[State -3, BLOCKING]
type = helper
triggerall = var(30) && var(39)
trigger1 = var(45)<3
trigger1 = Time = 1
trigger1 = TeamMode != turns || TeamMode != single
trigger1 = StateNo = 4300 || StateNo = 4301 || StateNo = 4302
id = 2600+var(45)
name = "BLOCKING"
pos = 0,0
postype = P1
stateno = 2605
helpertype = normal
keyctrl = 0
ownpal = 1
supermovetime = 9999999999999999
pausemovetime = 9999999999999999

[State -2,2]
type = VarSet
triggerall = var(39)
trigger1 = StateNo != [4300,4302]
trigger1 = StateNo != [4400,4402]
trigger1 = StateNo != [4500,4520]
trigger1 = StateNo != 5201
var(39) = 0

;---------------------------------------------------------------------
; 特殊ジャンプ管理
[State -2,VarSet]
type = VarSet
trigger1 = Command = "holddown"
var(31) = 10

[State -2,VarSet]
type = Varadd
trigger1 = var(31) > 0 && StateNo != 40 && Command != "holddown"
var(31) = -1

[State -2,VarSet]
type = VarSet
trigger1 = MoveType = H || StateNo = 11
var(31) = 0

[State -2,VarSet]
type = VarSet
trigger1 = StateNo != 40 && StateType != A
var(32) = 0

;---------------------------------------------------------------------
; ガードフラグ
[State 1000, 0]
type = Null;AssertSpecial
trigger1 = var(30) = [2,6]
flag = noairguard

[State 1000, 0]
type = AssertSpecial
trigger1 = var(30)=2 && fvar(8)
flag = nostandguard
flag2 = nocrouchguard

;---------------------------------------------------------------------
; ジャストディフェンス
[State -2, Just Defended]
type = VarSet
triggerall = Var(37)!
triggerall = stateno != 150 && stateno != 152 && stateno != 154
trigger1 = command = "back" || command = "downback"
var(37) = 11

[State -2, Just Defended]
type = VarSet
triggerall = Var(37) > 5
trigger1 = command = "fwd" || command = "downfwd" || command = "down" || command = "upback" || command = "up" || command = "upfwd"
var(37) = 5

[State -2, Just Defended]
type = VarAdd
trigger1 = Var(37)
var(37) = -1
ignorehitpause = 1

[State -2, Just Defended]
type = ChangeState
triggerall = var(30)=6
trigger1 = stateno = 150 && stateno != [4400,4401]
trigger1 = Var(37) > 5
trigger1 = inguarddist
value = 4400
ignorehitpause = 1

[State -2, Just Defended]
type = ChangeState
triggerall = var(30)=6
trigger1 = stateno = 152 && stateno != [4402,4403]
trigger1 = Var(37) > 5
trigger1 = inguarddist
value = 4402
ignorehitpause = 1

[State -2, Just Defended]
type = HitOverride
triggerall = var(30)=6
trigger1 = Var(37) > 5
trigger1 = statetype = A
trigger1 = stateno != [4404,4405]
attr = A,NA,SA,HA,NP,SP,HP
stateno = 4404
time = 1

;---------------------------------------------------------------------
; ブロッキング
[State -3, Blocking5]
type = helper
trigger1 = !var(44)
trigger1 = var(30) = 3
trigger1 = command = "fwd"
trigger1 = !NumHelper(4310)
trigger1 = Var(32) != 2
trigger1 = Ctrl
stateno = 4310
id = 4310

[State -3, Blocking5]
type = helper
trigger1 = !var(44)
trigger1 = var(30) = 3
trigger1 = command = "downfwd"
trigger1 = statetype != A && !NumHelper(4311)
trigger1 = Ctrl
stateno = 4311
id = 4311

[State -2, Blocking]
type = HitOverride
trigger1 = !var(44)
trigger1 = NumHelper(4310)
trigger1 = statetype != A
trigger1 = Ctrl
attr = SCA,NP,SP,HP
stateno = 4300
time = 1
slot = 0

[State -2, Blocking]
type = HitOverride
trigger1 = !var(44)
trigger1 = NumHelper(4311)
trigger1 = statetype != A
trigger1 = Ctrl
attr = C,NP,SP,HP
stateno = 4301
time = 1
slot = 1

[State -2, Blocking]
type = HitOverride
trigger1 = !var(44)
trigger1 = NumHelper(4310)
trigger1 = statetype = A
trigger1 = Ctrl
attr = SCA,NP,SP,HP
stateno = 4302
time = 1
slot = 2

[State -3, Blocking5]
type = ChangeState
trigger1 = var(35) = 2
trigger1 = statetype != A
trigger1 = Ctrl
value = 4301

[State -3, Blocking5]
type = ChangeState
trigger1 = var(35) = 1
trigger1 = statetype != A
trigger1 = Ctrl
value = 4300

[State -3, Blocking5]
type = ChangeState
trigger1 = var(35) = 1
trigger1 = statetype = A
trigger1 = Ctrl
value = 4302

[State -3, Blocking7]
type = NotHitBy
trigger1 = var(44) = 1
value = SCA
Time = 1

[State -3, Blocking8]
type = VarSet
trigger1 = StateNo != [4300,4399]
var(44) = 0
ignorehitpause = 1

[State -2, Just Defended]
type = VarSet
trigger1 = Ctrl!
var(35) = 0

;---------------------------------------------------------------------
; 削られＫＯ
;----------------
[State -2,VarSet]
type = VarSet
trigger1 = (Stateno = [5000,5050]) && (PrevStateno = 150 || PrevStateno = 151 || PrevStateno = 130)
var(38) = 1
ignorehitpause = 1

[State -2,VarSet]
type = VarSet
trigger1 = (Stateno = [5000,5050]) && (PrevStateno = 152 || PrevStateno = 153 || PrevStateno = 131)
var(38) = 2
ignorehitpause = 1

[State -2,VarSet]
type = VarSet
trigger1 = RoundState = 1
var(38) = 0
ignorehitpause = 1

[State -2,AssertSpecial]
type = AssertSpecial
trigger1 = (Stateno = [5000,5050]) && (PrevStateno = 150 || PrevStateno = 151 || PrevStateno = 130)
trigger2 = (Stateno = [5000,5050]) && (PrevStateno = 152 || PrevStateno = 153 || PrevStateno = 131)
trigger3 = StateNo = 5950
flag = NoKOSnd
ignorehitpause = 1

[State 1000, 0]
type = StopSnd
trigger1 = (Stateno = [5000,5050]) && (PrevStateno = 150 || PrevStateno = 151 || PrevStateno = 130)
trigger2 = (Stateno = [5000,5050]) && (PrevStateno = 152 || PrevStateno = 153 || PrevStateno = 131)
trigger3 = StateNo = 5950
channel = 15
ignorehitpause = 1

[State 150, 2]
type = ChangeState
triggerall = !Alive
trigger1 = (Stateno = [5000,5050]) && (PrevStateno = 150 || PrevStateno = 151 || PrevStateno = 130)
trigger2 = (Stateno = [5000,5050]) && (PrevStateno = 152 || PrevStateno = 153 || PrevStateno = 131)
value = 5950
ignorehitpause = 1

-----------------------------------------------------
; グルーブ
[State 4100,Varadd]
type = VarAdd
triggerall = Time = 0 && fvar(8)!
triggerall = var(30)=4 || var(30)=6
trigger1 = StateNo = 5000 || StateNo = 5010 || StateNo = 5020 || StateNo = 5030 || StateNo = 5070
trigger2 = var(30)=4 && (StateNo = 150 || StateNo = 152 || StateNo = 154)
fvar(7) = 2
ignorehitpause = 1

[State 4100,Varadd]
type = VarSet
trigger1 = NumHelper(21000) || NumHelper(22000)
trigger1 = fvar(8)!
trigger1 = StateNo != 4200 && StateNo != 4210
fvar(7) = Power
ignorehitpause = 1

[State 4100,Varadd]
type = VarSet
trigger1 = StateNo != [3000,3999]
trigger1 = NumHelper(24000) || NumHelper(26000)
trigger1 = fvar(8)!
trigger1 = var(40) = 2
fvar(7) = ifelse(NumHelper(24000),100,72)
ignorehitpause = 1

[State 4100,Varadd]
type = VarAdd
triggerall = Time = 0 && fvar(8)!
triggerall = var(30)=4 || var(30)=6
trigger1 = StateNo = 5000 || StateNo = 5010 || StateNo = 5020 || StateNo = 5030 || StateNo = 5070
fvar(7) = Ceil(GetHitVar(damage)*.07)
ignorehitpause = 1

[State -2, mode select]
type = AssertSpecial
trigger1 = NumHelper(20000)
flag = Intro

;---------------------------------------------------------------------
; 投げられ時のゲージ増加量
[State 4100,Varadd]
type = VarAdd
triggerall = var(30)=4 || var(30)=6 
triggerall = fvar(8)!
triggerall = var(48) != life
trigger1 = MoveType = H
trigger1 = StateNo != [5000,5999]
trigger1 = StateNo != [120,169]
fvar(7) = ifelse(var(30)=4,2,((Var(48)-life)*.07))
ignorehitpause = 1

[State 4100,Varadd]
type = VarSet
trigger1 = var(30)=4 || var(30)=6 
var(48) = Life
ignorehitpause = 1

;パワーゲージ増加量
[State -2,VarSet]
type = VarSet
trigger1 = 1
fvar(5) = ifelse((var(30)=4||var(30)=6||(Var(30)=2&&fvar(8))||(Var(30)=5&&fvar(8))),0,ifelse(Var(30)=2,1.16,ifelse(Var(30)=3,0.87,ifelse(Var(30)=3,.77,1))))

[State -3,Super]
type = Helper
triggerall = roundstate >= 1 && Var(30) = 1
trigger1 = !NumHelper(20000)
trigger1 = !NumHelper(21000)
id = 21000
name = "Super Combo Gauge"
pos = 0,0
postype = P1
stateno = 21000
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
supermovetime = 9999999999999999
pausemovetime = 9999999999999999

[State -3,Super]
type = Helper
triggerall = roundstate >= 1 && Var(30) = 2
trigger1 = !NumHelper(20000)
trigger1 = !NumHelper(22000)
id = 22000
name = "Original Combo Gauge"
pos = 0,0
postype = P1
stateno = 22000
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
supermovetime = 9999999999999999
pausemovetime = 9999999999999999

[State -3,Super]
type = Helper
triggerall = roundstate >= 1 && Var(30) = 3
trigger1 = !NumHelper(20000)
trigger1 = !NumHelper(23000)
id = 23000
name = "Super Combo Gauge"
pos = 0,0
postype = P1
stateno = 23000
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
supermovetime = 9999999999999999
pausemovetime = 9999999999999999

[State -3,Super]
type = Helper
triggerall = roundstate >= 1 && Var(30) = 4
trigger1 = !NumHelper(20000)
trigger1 = !NumHelper(24000)
id = 24000
name = "Extra Gauge"
pos = 0,0
postype = P1
stateno = 24000
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
supermovetime = 9999999999999999
pausemovetime = 9999999999999999

[State -3,Super]
type = Helper
triggerall = roundstate >= 1 && Var(30) = 5
trigger1 = !NumHelper(20000)
trigger1 = !NumHelper(25000)
id = 25000
name = "Advanced Power Gauge"
pos = 0,0
postype = P1
stateno = 25000
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
supermovetime = 9999999999999999
pausemovetime = 9999999999999999

[State -3,Super]
type = Helper
triggerall = roundstate >= 1 && Var(30) = 6
trigger1 = !NumHelper(20000)
trigger1 = !NumHelper(26000)
id = 26000
name = "Anger Gauge"
pos = 0,0
postype = P1
stateno = 26000
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
supermovetime = 9999999999999999
pausemovetime = 9999999999999999

[State -2, 1]
type = PalFX
triggerall = fvar(8)
triggerall = var(30)=5
trigger1 = GameTime % 2
time = 1
add = 128,72,16
mul = 270,240,120
color = 10
ignorehitpause = 1

[State -2, 1]
type = PalFX
trigger1 = fvar(8) && var(30) = 6
Time = 1
add = ceil(70+(-70*sin(gametime*.075))),-20,-20
mul = 155,125,125
ignorehitpause = 1
persistent = 0

[State 5900, 1]
type = VarSet
trigger1 = RoundState = 4
trigger1 = fvar(8) && var(30) = 6
fvar(7) = 0

;---------------------------------------------------------------------------
; 攻撃値修正
;------------------------ 根性値
[State -2,2]
type = VarSet
trigger1 = 1
fvar(6) = ifelse(((100*life/const(data.life))<=15),.1,ifelse(((100*life/const(data.life))<=30),.05,0))+ifelse(((100*(enemy,life)/(enemy,const(data.life)))<=15),-.25,ifelse(((100*(enemy,life)/(enemy,const(data.life)))<=30),-.1,0))

;------------------------ ゲージ蓄積による攻撃力の増加
[State -2,2]
type = VarSet
trigger1 = 1
fvar(9) = ifelse(var(34),1.2,1)*ifelse(fvar(8),ifelse(var(30)=4,1.15,ifelse(var(30)=5,1.2,ifelse((var(30)=6&&StateNo=[3000,3999]),1.15,ifelse((var(30)=6&&StateNo=[1000,1999]),1.30,1.35)))),1)

;------------------------ 攻撃力補正値
[State -2,2]
type = VarSet
trigger1 = fvar(10)>=.05
fvar(10) = ifelse((Var(30) = 2 && Fvar(8)),((((10-var(41))/10.0)*ifelse((StateNo=[1000,1999]),.72,.8)+fvar(6))*ifelse(var(34),1.2,1)),((ifelse(var(41)>5,((24-(var(41)-5))/24.0),1)+fvar(6))*fvar(9)))

[State -2,2]
type = VarSet
trigger1 = !(Var(30) = 2 && Fvar(8))
trigger1 = fvar(10)<.05
fvar(10) = .05

[State -2,2]
type = VarSet
trigger1 = Var(30) = 2 && Fvar(8)
trigger1 = fvar(10)<.01
fvar(10) = .01

;------------------------ 攻撃値修正
[State -3,Combo-AttackMul]
type = AttackMulSet
trigger1 = 1
value= fvar(10)

;------------------------ 防御値修正
[State -3,K-DefenceMul]
type = LifeAdd
trigger1 = fvar(8)
trigger1 = Var(30) = 6
trigger1 = var(33) > life
value = Ceil(-(life-var(33))+((life-var(33))/1.225))

[State -3,DefenceMul]
type = VarSet
trigger1 = var(33) != life
var(33) = life

;---------------------------------------------------------------------------
; ヒット数カウント
[State -2,2]
type = VarSet
trigger1 = NumTarget!
var(41) = 0

[State -2,2]
type = VarSet
trigger1 = var(42)!
trigger1 = NumTarget
trigger1 = HitPauseTime != 0
var(42) = 1
ignorehitpause = 1

[State -2,2]
type = Varadd
trigger1 = NumTarget
trigger1 = var(42) = 1
trigger2 = ProjHitTime(0) = 1
var(41) = 1
ignorehitpause = 1

[State -2,2]
type = VarSet
trigger1 = var(42) = 1
var(42) = -1
ignorehitpause = 1

[State -2,2]
type = VarSet
trigger1 = HitPauseTime = 0
var(42) = 0
ignorehitpause = 1

;---------------------------------------------------------------------
; カウンターヒット関連
[State -2,Counter1]
type = VarSet
triggerall = !var(28)
triggerall = StateNo != 4500
trigger1 = P2movetype = A
trigger2 = P2StateNo = 100
var(34) = 1

[State -2,Counter2]
type = VarSet
triggerall = !var(28)
triggerall = StateNo != 4500
trigger1 = var(34)
trigger1 = !var(46)
trigger1 = MoveHit=1 || ProjHit=1 && ProjCancelTime(0) = 0
var(46) = 1
ignorehitpause = 1

[State -2,VarSet]
type = VarSet
triggerall = P1name = "cvsmai"
trigger1 = ProjHitTime(1050) = 1
trigger2 = ProjHitTime(3050) = 1
trigger3 = ProjHitTime(3051) = 1
trigger4 = ProjHitTime(3052) = 1
trigger5 = ProjHitTime(3060) = 1
trigger6 = ProjHitTime(3061) = 1
trigger7 = ProjHitTime(3062) = 1
trigger8 = ProjHitTime(3070) = 1
trigger9 = ProjHitTime(3071) = 1
trigger10= ProjHitTime(3072) = 1
var(20) = 0

[State -2,VarSet]
type = VarSet
triggerall = P1name = "cvsmai"
trigger1 = ProjHitTime(1050) = 1
trigger2 = ProjHitTime(3050) = 1
trigger3 = ProjHitTime(3060) = 1
trigger4 = ProjHitTime(3070) = 1
var(21) = -68

[State -2,VarSet]
type = VarSet
triggerall = P1name = "cvsmai"
trigger1 = ProjHitTime(3051) = 1
trigger2 = ProjHitTime(3061) = 1
trigger3 = ProjHitTime(3071) = 1
var(21) = -58

[State -2,VarSet]
type = VarSet
triggerall = P1name = "cvsmai"
trigger1 = ProjHitTime(3052) = 1
trigger2 = ProjHitTime(3062) = 1
trigger3 = ProjHitTime(3072) = 1
var(21) = -28

[State -3, Counter3]
type = helper
triggerall = !var(28)
triggerall = StateNo != 4500
trigger1 = var(45)<3
trigger1 = var(46)=1
trigger1 = TeamMode != turns || TeamMode != single
id = 2600+var(45)
name = "COUNTER HIT"
pos = 0,0
postype = P1
stateno = 2601
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 99999

[State -3, Counter4]
type = helper
triggerall = !var(28)
triggerall = StateNo != 4500
trigger1 = var(46)=1
trigger1 = TeamMode != turns || TeamMode != single
id = 2030
name = "COUNTER HIT"
pos = Ceil(enemy,Const(size.ground.front)+Var(20)),Ceil(Pos Y-ifelse((StateType=A),(enemy,Pos Y),0)+Var(21))
postype = P2
stateno = 2030
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 99999

[State -2,Counter5]
type = VarSet
trigger1 = var(46) = 1
var(46) = -1
ignorehitpause = 1

[State -2,Counter6]
type = VarSet
trigger1 = MoveHit!
trigger1 = ProjHit=0
var(46) = 0

[State -2,Counter7]
type = VarSet
trigger1 = P2movetype != A
trigger1 = P2StateNo != 100
var(34) = 0
ignorehitpause = 1

[State -2,Counter8]
type = VarSet
triggerall = var(28)
trigger1 = MoveType != A
var(28) = 0

;---------------------------------------
;強制振り向き
[State -2, Turn]
type = Turn
trigger1 = p2dist X < -5
trigger1 = PrevStateNo = 5320

;---------------------------------------------------------------------------
; KO時声管理
[State -2,VarSet(11)]
type = VarSet
trigger1 = Alive
trigger1 = P1name = "cvsiori"
var(49) = 0

[State -2,VarSet(11)]
type = VarSet
trigger1 = !Alive && var(49) = 0
trigger1 = P1name = "cvsiori"
var(49) = 1

[State -2,AssertSpecial]
type = AssertSpecial
trigger1 = P1name = "cvsiori"
trigger1 = Var(29)
flag = NoKOSnd
ignorehitpause = 1

[State -2,PlaySnd]
type = PlaySnd
trigger1 = P1name = "cvsiori"
trigger1 = Var(29)
trigger1 = RoundState = 3
trigger1 = !Alive && Var(49)=1
value = 10011,0
channel = 15
lowpriority = 1
persistent = 0

[State -2,VarSet(11)]
type = VarSet
trigger1 = P1name = "cvsiori"
trigger1 = var(49) = 1
var(49) = -1

;---------------------------------------------------------------------------
; やられ声
[State -3,PlaySnd3]
type = PlaySnd
triggerall = Time = 1 && Alive && Random < 333
triggerall = StateNo != [5000,5999]
triggerall = StateNo != [120,159]
triggerall = StateNo != [4300,4499]
triggerall = MoveType = H
trigger1 = (anim = [5000,5002]) || (anim = [5010,5012]) || (anim = [5020,5022])
trigger2 = anim = 5030 || (anim = [5050,5052]) || anim = 5070 || (anim = [5080,5082]) || (anim = [5090,5092])
value = 5000,20
channel = 0

;---------------------------------------
; 飛び道具掻き消し音
[State 810,PlaySnd]
type = PlaySnd
trigger1 = ProjCancelTime(0) = 1
value = 1, 10

;---------------------------------------
; 固有エフェクト消去
[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = NumExplod(200)
trigger1 = MoveType = H
trigger1 = P1name = "cvsvega"
id = 200
[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = NumExplod(205)
trigger1 = MoveType = H 
trigger1 = P1name = "cvsvega"
id = 205
[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = NumExplod(210)
trigger1 = MoveType = H
trigger1 = P1name = "cvsvega"
id = 210
[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = NumExplod(215)
trigger1 = MoveType = H
trigger1 = P1name = "cvsvega"
id = 215
[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = NumExplod(220)
trigger1 = MoveType = H
trigger1 = P1name = "cvsvega"
id = 220
[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = NumExplod(225)
trigger1 = MoveType = H
trigger1 = P1name = "cvsvega"
id = 225
[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = NumExplod(400)
trigger1 = MoveType = H
trigger1 = P1name = "cvsvega"
id = 400
[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = NumExplod(410)
trigger1 = MoveType = H
trigger1 = P1name = "cvsvega"
id = 410
[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = NumExplod(420)
trigger1 = MoveType = H
trigger1 = P1name = "cvsvega"
id = 420
[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = NumExplod(600)
trigger1 = MoveType = H
trigger1 = P1name = "cvsvega"
id = 600
[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = NumExplod(605)
trigger1 = MoveType = H
trigger1 = P1name = "cvsvega"
id = 605
[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = NumExplod(610)
trigger1 = MoveType = H
trigger1 = P1name = "cvsvega"
id = 610
[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = NumExplod(615)
trigger1 = MoveType = H
trigger1 = P1name = "cvsvega"
id = 615
[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = NumExplod(616)
trigger1 = MoveType = H
trigger1 = P1name = "cvsvega"
id = 616
[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = NumExplod(620)
trigger1 = MoveType = H
trigger1 = P1name = "cvsvega"
id = 620
[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = NumExplod(625)
trigger1 = MoveType = H
trigger1 = P1name = "cvsvega"
id = 625
[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = NumExplod(4020)
trigger1 = MoveType = H
trigger1 = P1name = "cvsvega"
id = 4020
[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = NumExplod(4300)
trigger1 = MoveType = H && StateNo != 4300
trigger1 = P1name = "cvsvega"
id = 4300
[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = NumExplod(4301)
trigger1 = MoveType = H && StateNo != 4301
trigger1 = P1name = "cvsvega"
id = 4301
[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = NumExplod(1000)
trigger1 = MoveType = H
trigger1 = P1name = "cvsvega"
id = 1000
[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = NumExplod(1010)
trigger1 = MoveType = H
trigger1 = P1name = "cvsvega"
id = 1010
[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = NumExplod(1020)
trigger1 = MoveType = H
trigger1 = P1name = "cvsvega"
id = 1020
[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = NumExplod(1101)
trigger1 = MoveType = H
trigger1 = P1name = "cvsvega"
id = 1101
[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = NumExplod(1210)
trigger1 = MoveType = H
trigger1 = P1name = "cvsvega"
id = 1210
[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = NumExplod(1252)
trigger1 = MoveType = H
trigger1 = P1name = "cvsvega"
id = 1252
[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = NumExplod(1301)
trigger1 = MoveType = H
trigger1 = P1name = "cvsvega"
id = 1301
[State -2, RemoveExplod]
type = RemoveExplod
triggerall = NumExplod(3060)
triggerall = P1name = "cvsmai"
trigger1 = NumProjid(3060)!
id = 3060
[State -2, RemoveExplod]
type = RemoveExplod
triggerall = NumExplod(3061)
triggerall = P1name = "cvsmai"
trigger1 = NumProjid(3061)!
id = 3061
[State -2, RemoveExplod]
type = RemoveExplod
triggerall = NumExplod(3062)
triggerall = P1name = "cvsmai"
trigger1 = NumProjid(3062)!
id = 3062
[State -2, RemoveExplod]
type = RemoveExplod
triggerall = NumExplod(3070)
triggerall = P1name = "cvsmai"
trigger1 = NumProjid(3070)!
id = 3070
[State -2, RemoveExplod]
type = RemoveExplod
triggerall = NumExplod(3071)
triggerall = P1name = "cvsmai"
trigger1 = NumProjid(3071)!
id = 3071
[State -2, RemoveExplod]
type = RemoveExplod
triggerall = NumExplod(3072)
triggerall = P1name = "cvsmai"
trigger1 = NumProjid(3072)!
id = 3072

;---------------------------------------------------------------------
; フィニッシュ処理
;------------------------ 
[State -3,SuperFinish]
type = Helper
triggerall = NumHelper(2800)!
triggerall = Win && !WinTime
triggerall = RoundState = 3
triggerall = var(41) > 0
trigger1 = (StateNo = [3000,3999])
trigger2 = Var(30) = 2 && Fvar(8)
persistent = 0
id = 2800
name = "finish"
pos = 160,0
postype = left
stateno = 2800
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 99999999999999

;---------------------------------------------------------------------------
; トレーニングモード
; -アーケードモードの第1戦とVSモードで、ラウンド開始直後にF3を押して
; -パワーを満タンにすると暴発します。
[State -2, Training]
type = VarSet
trigger1 = !var(40)
trigger1 = ctrl
trigger2 = RoundNo > 1
var(40) = 1

[State -2, Training]
type = VarSet
trigger1 = !var(40)
trigger1 = Power >= const(data.power)
trigger1 = RoundNo = 1 && MatchNo = 1 && NumPartner = 0 && NumEnemy = 1
var(40) = 2

;---------------------------------------------------------------------------
; CPU
[State 5900, VarSet(48)]
type = VarSet
trigger1 = (StateNo != 193 && P1name = "cvsiori" || P1name != "cvsiori")
trigger1 = IsHomeTeam && Roundstate = 0 && Pos X > 0
fvar(0) = 1
